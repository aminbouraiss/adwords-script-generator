<script>
//! moment.js
//! version : 2.12.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return Zc.apply(null,arguments)}function b(a){Zc=a}function c(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Ia(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a){return void 0===a}function n(a,b){var c,d,e;if(m(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),m(b._i)||(a._i=b._i),m(b._f)||(a._f=b._f),m(b._l)||(a._l=b._l),m(b._strict)||(a._strict=b._strict),m(b._tzm)||(a._tzm=b._tzm),m(b._isUTC)||(a._isUTC=b._isUTC),m(b._offset)||(a._offset=b._offset),m(b._pf)||(a._pf=j(b)),m(b._locale)||(a._locale=b._locale),$c.length>0)for(c in $c)d=$c[c],e=b[d],m(e)||(a[d]=e);return a}function o(b){n(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),_c===!1&&(_c=!0,a.updateOffset(this),_c=!1)}function p(a){return a instanceof o||null!=a&&null!=a._isAMomentObject}function q(a){return 0>a?Math.ceil(a):Math.floor(a)}function r(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=q(b)),c}function s(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&r(a[d])!==r(b[d]))&&g++;return g+f}function t(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function u(a,b){var c=!0;return g(function(){return c&&(t(a+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function v(a,b){ad[a]||(t(b),ad[a]=!0)}function w(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function x(a){return"[object Object]"===Object.prototype.toString.call(a)}function y(a){var b,c;for(c in a)b=a[c],w(b)?this[c]=b:this["_"+c]=b;this._config=a,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function z(a,b){var c,d=g({},a);for(c in b)f(b,c)&&(x(a[c])&&x(b[c])?(d[c]={},g(d[c],a[c]),g(d[c],b[c])):null!=b[c]?d[c]=b[c]:delete d[c]);return d}function A(a){null!=a&&this.set(a)}function B(a){return a?a.toLowerCase().replace("_","-"):a}function C(a){for(var b,c,d,e,f=0;f<a.length;){for(e=B(a[f]).split("-"),b=e.length,c=B(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=D(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&s(e,c,!0)>=b-1)break;b--}f++}return null}function D(a){var b=null;if(!cd[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=bd._abbr,require("./locale/"+a),E(b)}catch(c){}return cd[a]}function E(a,b){var c;return a&&(c=m(b)?H(a):F(a,b),c&&(bd=c)),bd._abbr}function F(a,b){return null!==b?(b.abbr=a,null!=cd[a]?(v("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),b=z(cd[a]._config,b)):null!=b.parentLocale&&(null!=cd[b.parentLocale]?b=z(cd[b.parentLocale]._config,b):v("parentLocaleUndefined","specified parentLocale is not defined yet")),cd[a]=new A(b),E(a),cd[a]):(delete cd[a],null)}function G(a,b){if(null!=b){var c;null!=cd[a]&&(b=z(cd[a]._config,b)),c=new A(b),c.parentLocale=cd[a],cd[a]=c,E(a)}else null!=cd[a]&&(null!=cd[a].parentLocale?cd[a]=cd[a].parentLocale:null!=cd[a]&&delete cd[a]);return cd[a]}function H(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return bd;if(!c(a)){if(b=D(a))return b;a=[a]}return C(a)}function I(){return Object.keys(cd)}function J(a,b){var c=a.toLowerCase();dd[c]=dd[c+"s"]=dd[b]=a}function K(a){return"string"==typeof a?dd[a]||dd[a.toLowerCase()]:void 0}function L(a){var b,c,d={};for(c in a)f(a,c)&&(b=K(c),b&&(d[b]=a[c]));return d}function M(b,c){return function(d){return null!=d?(O(this,b,d),a.updateOffset(this,c),this):N(this,b)}}function N(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function O(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function P(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=K(a),w(this[a]))return this[a](b);return this}function Q(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function R(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(hd[a]=e),b&&(hd[b[0]]=function(){return Q(e.apply(this,arguments),b[1],b[2])}),c&&(hd[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function S(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function T(a){var b,c,d=a.match(ed);for(b=0,c=d.length;c>b;b++)hd[d[b]]?d[b]=hd[d[b]]:d[b]=S(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function U(a,b){return a.isValid()?(b=V(b,a.localeData()),gd[b]=gd[b]||T(b),gd[b](a)):a.localeData().invalidDate()}function V(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(fd.lastIndex=0;d>=0&&fd.test(a);)a=a.replace(fd,c),fd.lastIndex=0,d-=1;return a}function W(a,b,c){zd[a]=w(b)?b:function(a,d){return a&&c?c:b}}function X(a,b){return f(zd,a)?zd[a](b._strict,b._locale):new RegExp(Y(a))}function Y(a){return Z(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function Z(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function $(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=r(a)}),c=0;c<a.length;c++)Ad[a[c]]=d}function _(a,b){$(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function aa(a,b,c){null!=b&&f(Ad,a)&&Ad[a](b,c._a,c,a)}function ba(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function ca(a,b){return c(this._months)?this._months[a.month()]:this._months[Kd.test(b)?"format":"standalone"][a.month()]}function da(a,b){return c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Kd.test(b)?"format":"standalone"][a.month()]}function ea(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function fa(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=r(b);else if(b=a.localeData().monthsParse(b),"number"!=typeof b)return a;return c=Math.min(a.date(),ba(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function ga(b){return null!=b?(fa(this,b),a.updateOffset(this,!0),this):N(this,"Month")}function ha(){return ba(this.year(),this.month())}function ia(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ka.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex}function ja(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ka.call(this),a?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex}function ka(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;12>b;b++)c=h([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;12>b;b++)d[b]=Z(d[b]),e[b]=Z(e[b]),f[b]=Z(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")$","i")}function la(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[Cd]<0||c[Cd]>11?Cd:c[Dd]<1||c[Dd]>ba(c[Bd],c[Cd])?Dd:c[Ed]<0||c[Ed]>24||24===c[Ed]&&(0!==c[Fd]||0!==c[Gd]||0!==c[Hd])?Ed:c[Fd]<0||c[Fd]>59?Fd:c[Gd]<0||c[Gd]>59?Gd:c[Hd]<0||c[Hd]>999?Hd:-1,j(a)._overflowDayOfYear&&(Bd>b||b>Dd)&&(b=Dd),j(a)._overflowWeeks&&-1===b&&(b=Id),j(a)._overflowWeekday&&-1===b&&(b=Jd),j(a).overflow=b),a}function ma(a){var b,c,d,e,f,g,h=a._i,i=Pd.exec(h)||Qd.exec(h);if(i){for(j(a).iso=!0,b=0,c=Sd.length;c>b;b++)if(Sd[b][1].exec(i[1])){e=Sd[b][0],d=Sd[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=Td.length;c>b;b++)if(Td[b][1].exec(i[3])){f=(i[2]||" ")+Td[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Rd.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),Ba(a)}else a._isValid=!1}function na(b){var c=Ud.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ma(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function oa(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 100>a&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function pa(a){var b=new Date(Date.UTC.apply(null,arguments));return 100>a&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function qa(a){return ra(a)?366:365}function ra(a){return a%4===0&&a%100!==0||a%400===0}function sa(){return ra(this.year())}function ta(a,b,c){var d=7+b-c,e=(7+pa(a,0,d).getUTCDay()-b)%7;return-e+d-1}function ua(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=ta(a,d,e),j=1+7*(b-1)+h+i;return 0>=j?(f=a-1,g=qa(f)+j):j>qa(a)?(f=a+1,g=j-qa(a)):(f=a,g=j),{year:f,dayOfYear:g}}function va(a,b,c){var d,e,f=ta(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return 1>g?(e=a.year()-1,d=g+wa(e,b,c)):g>wa(a.year(),b,c)?(d=g-wa(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function wa(a,b,c){var d=ta(a,b,c),e=ta(a+1,b,c);return(qa(a)-d+e)/7}function xa(a,b,c){return null!=a?a:null!=b?b:c}function ya(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function za(a){var b,c,d,e,f=[];if(!a._d){for(d=ya(a),a._w&&null==a._a[Dd]&&null==a._a[Cd]&&Aa(a),a._dayOfYear&&(e=xa(a._a[Bd],d[Bd]),a._dayOfYear>qa(e)&&(j(a)._overflowDayOfYear=!0),c=pa(e,0,a._dayOfYear),a._a[Cd]=c.getUTCMonth(),a._a[Dd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[Ed]&&0===a._a[Fd]&&0===a._a[Gd]&&0===a._a[Hd]&&(a._nextDay=!0,a._a[Ed]=0),a._d=(a._useUTC?pa:oa).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[Ed]=24)}}function Aa(a){var b,c,d,e,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=xa(b.GG,a._a[Bd],va(Ja(),1,4).year),d=xa(b.W,1),e=xa(b.E,1),(1>e||e>7)&&(i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=xa(b.gg,a._a[Bd],va(Ja(),f,g).year),d=xa(b.w,1),null!=b.d?(e=b.d,(0>e||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f),1>d||d>wa(c,f,g)?j(a)._overflowWeeks=!0:null!=i?j(a)._overflowWeekday=!0:(h=ua(c,d,e,f,g),a._a[Bd]=h.year,a._dayOfYear=h.dayOfYear)}function Ba(b){if(b._f===a.ISO_8601)return void ma(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=V(b._f,b._locale).match(ed)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(X(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),hd[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),aa(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[Ed]<=12&&b._a[Ed]>0&&(j(b).bigHour=void 0),b._a[Ed]=Ca(b._locale,b._a[Ed],b._meridiem),za(b),la(b)}function Ca(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function Da(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=n({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],Ba(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function Ea(a){if(!a._d){var b=L(a._i);a._a=e([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),za(a)}}function Fa(a){var b=new o(la(Ga(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Ga(a){var b=a._i,e=a._f;return a._locale=a._locale||H(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),p(b)?new o(la(b)):(c(e)?Da(a):e?Ba(a):d(b)?a._d=b:Ha(a),k(a)||(a._d=null),a))}function Ha(b){var f=b._i;void 0===f?b._d=new Date(a.now()):d(f)?b._d=new Date(+f):"string"==typeof f?na(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),za(b)):"object"==typeof f?Ea(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Ia(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,Fa(f)}function Ja(a,b,c,d){return Ia(a,b,c,d,!1)}function Ka(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Ja();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function La(){var a=[].slice.call(arguments,0);return Ka("isBefore",a)}function Ma(){var a=[].slice.call(arguments,0);return Ka("isAfter",a)}function Na(a){var b=L(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=H(),this._bubble()}function Oa(a){return a instanceof Na}function Pa(a,b){R(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+Q(~~(a/60),2)+b+Q(~~a%60,2)})}function Qa(a,b){var c=(b||"").match(a)||[],d=c[c.length-1]||[],e=(d+"").match(Zd)||["-",0,0],f=+(60*e[1])+r(e[2]);return"+"===e[0]?f:-f}function Ra(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(p(b)||d(b)?+b:+Ja(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Ja(b).local()}function Sa(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Ta(b,c){var d,e=this._offset||0;return this.isValid()?null!=b?("string"==typeof b?b=Qa(wd,b):Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Sa(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?ib(this,cb(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Sa(this):null!=b?this:NaN}function Ua(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Va(a){return this.utcOffset(0,a)}function Wa(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Sa(this),"m")),this}function Xa(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Qa(vd,this._i)),this}function Ya(a){return this.isValid()?(a=a?Ja(a).utcOffset():0,(this.utcOffset()-a)%60===0):!1}function Za(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function $a(){if(!m(this._isDSTShifted))return this._isDSTShifted;var a={};if(n(a,this),a=Ga(a),a._a){var b=a._isUTC?h(a._a):Ja(a._a);this._isDSTShifted=this.isValid()&&s(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function _a(){return this.isValid()?!this._isUTC:!1}function ab(){return this.isValid()?this._isUTC:!1}function bb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function cb(a,b){var c,d,e,g=a,h=null;return Oa(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=$d.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:r(h[Dd])*c,h:r(h[Ed])*c,m:r(h[Fd])*c,s:r(h[Gd])*c,ms:r(h[Hd])*c}):(h=_d.exec(a))?(c="-"===h[1]?-1:1,g={y:db(h[2],c),M:db(h[3],c),w:db(h[4],c),d:db(h[5],c),h:db(h[6],c),m:db(h[7],c),s:db(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=fb(Ja(g.from),Ja(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Na(g),Oa(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function db(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function eb(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function fb(a,b){var c;return a.isValid()&&b.isValid()?(b=Ra(b,a),a.isBefore(b)?c=eb(a,b):(c=eb(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function gb(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function hb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(v(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=cb(c,d),ib(this,e,a),this}}function ib(b,c,d,e){var f=c._milliseconds,g=gb(c._days),h=gb(c._months);b.isValid()&&(e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&O(b,"Date",N(b,"Date")+g*d),h&&fa(b,N(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function jb(a,b){var c=a||Ja(),d=Ra(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse",g=b&&(w(b[f])?b[f]():b[f]);return this.format(g||this.localeData().calendar(f,this,Ja(c)))}function kb(){return new o(this)}function lb(a,b){var c=p(a)?a:Ja(a);return this.isValid()&&c.isValid()?(b=K(m(b)?"millisecond":b),"millisecond"===b?+this>+c:+c<+this.clone().startOf(b)):!1}function mb(a,b){var c=p(a)?a:Ja(a);return this.isValid()&&c.isValid()?(b=K(m(b)?"millisecond":b),"millisecond"===b?+c>+this:+this.clone().endOf(b)<+c):!1}function nb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function ob(a,b){var c,d=p(a)?a:Ja(a);return this.isValid()&&d.isValid()?(b=K(b||"millisecond"),"millisecond"===b?+this===+d:(c=+d,+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))):!1}function pb(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function qb(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function rb(a,b,c){var d,e,f,g;return this.isValid()?(d=Ra(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=K(b),"year"===b||"month"===b||"quarter"===b?(g=sb(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:q(g)):NaN):NaN}function sb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function tb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ub(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?w(Date.prototype.toISOString)?this.toDate().toISOString():U(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):U(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function vb(b){var c=U(this,b||a.defaultFormat);return this.localeData().postformat(c)}function wb(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ja(a).isValid())?cb({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function xb(a){return this.from(Ja(),a)}function yb(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ja(a).isValid())?cb({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function zb(a){return this.to(Ja(),a)}function Ab(a){var b;return void 0===a?this._locale._abbr:(b=H(a),null!=b&&(this._locale=b),this)}function Bb(){return this._locale}function Cb(a){switch(a=K(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function Db(a){return a=K(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function Eb(){return+this._d-6e4*(this._offset||0)}function Fb(){return Math.floor(+this/1e3)}function Gb(){return this._offset?new Date(+this):this._d}function Hb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function Ib(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Jb(){return this.isValid()?this.toISOString():null}function Kb(){return k(this)}function Lb(){return g({},j(this))}function Mb(){return j(this).overflow}function Nb(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ob(a,b){R(0,[a,a.length],0,b)}function Pb(a){return Tb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Qb(a){return Tb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Rb(){return wa(this.year(),1,4)}function Sb(){var a=this.localeData()._week;return wa(this.year(),a.dow,a.doy)}function Tb(a,b,c,d,e){var f;return null==a?va(this,d,e).year:(f=wa(a,d,e),b>f&&(b=f),Ub.call(this,a,b,c,d,e))}function Ub(a,b,c,d,e){var f=ua(a,b,c,d,e),g=pa(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Vb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Wb(a){return va(a,this._week.dow,this._week.doy).week}function Xb(){return this._week.dow}function Yb(){return this._week.doy}function Zb(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function $b(a){var b=va(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function _b(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function ac(a,b){return c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]}function bc(a){return this._weekdaysShort[a.day()]}function cc(a){return this._weekdaysMin[a.day()]}function dc(a,b,c){var d,e,f;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;7>d;d++){if(e=Ja([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function ec(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=_b(a,this.localeData()),this.add(a-b,"d")):b}function fc(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function gc(a){return this.isValid()?null==a?this.day()||7:this.day(this.day()%7?a:a-7):null!=a?this:NaN}function hc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function ic(){return this.hours()%12||12}function jc(a,b){R(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function kc(a,b){return b._meridiemParse}function lc(a){return"p"===(a+"").toLowerCase().charAt(0)}function mc(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function nc(a,b){b[Hd]=r(1e3*("0."+a))}function oc(){return this._isUTC?"UTC":""}function pc(){return this._isUTC?"Coordinated Universal Time":""}function qc(a){return Ja(1e3*a)}function rc(){return Ja.apply(null,arguments).parseZone()}function sc(a,b,c){var d=this._calendar[a];return w(d)?d.call(b,c):d}function tc(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function uc(){return this._invalidDate}function vc(a){return this._ordinal.replace("%d",a)}function wc(a){return a}function xc(a,b,c,d){var e=this._relativeTime[c];return w(e)?e(a,b,c,d):e.replace(/%d/i,a)}function yc(a,b){var c=this._relativeTime[a>0?"future":"past"];return w(c)?c(b):c.replace(/%s/i,b)}function zc(a,b,c,d){var e=H(),f=h().set(d,b);return e[c](f,a)}function Ac(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return zc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=zc(a,f,c,e);return g}function Bc(a,b){return Ac(a,b,"months",12,"month")}function Cc(a,b){return Ac(a,b,"monthsShort",12,"month")}function Dc(a,b){return Ac(a,b,"weekdays",7,"day")}function Ec(a,b){return Ac(a,b,"weekdaysShort",7,"day")}function Fc(a,b){return Ac(a,b,"weekdaysMin",7,"day")}function Gc(){var a=this._data;return this._milliseconds=xe(this._milliseconds),this._days=xe(this._days),this._months=xe(this._months),a.milliseconds=xe(a.milliseconds),a.seconds=xe(a.seconds),a.minutes=xe(a.minutes),a.hours=xe(a.hours),a.months=xe(a.months),a.years=xe(a.years),this}function Hc(a,b,c,d){var e=cb(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Ic(a,b){return Hc(this,a,b,1)}function Jc(a,b){return Hc(this,a,b,-1)}function Kc(a){return 0>a?Math.floor(a):Math.ceil(a)}function Lc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*Kc(Nc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=q(f/1e3),i.seconds=a%60,b=q(a/60),i.minutes=b%60,c=q(b/60),i.hours=c%24,g+=q(c/24),e=q(Mc(g)),h+=e,g-=Kc(Nc(e)),d=q(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function Mc(a){return 4800*a/146097}function Nc(a){return 146097*a/4800}function Oc(a){var b,c,d=this._milliseconds;if(a=K(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+Mc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(Nc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function Pc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*r(this._months/12)}function Qc(a){return function(){return this.as(a)}}function Rc(a){return a=K(a),this[a+"s"]()}function Sc(a){return function(){return this._data[a]}}function Tc(){return q(this.days()/7)}function Uc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Vc(a,b,c){var d=cb(a).abs(),e=Ne(d.as("s")),f=Ne(d.as("m")),g=Ne(d.as("h")),h=Ne(d.as("d")),i=Ne(d.as("M")),j=Ne(d.as("y")),k=e<Oe.s&&["s",e]||1>=f&&["m"]||f<Oe.m&&["mm",f]||1>=g&&["h"]||g<Oe.h&&["hh",g]||1>=h&&["d"]||h<Oe.d&&["dd",h]||1>=i&&["M"]||i<Oe.M&&["MM",i]||1>=j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Uc.apply(null,k)}function Wc(a,b){return void 0===Oe[a]?!1:void 0===b?Oe[a]:(Oe[a]=b,!0)}function Xc(a){var b=this.localeData(),c=Vc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Yc(){var a,b,c,d=Pe(this._milliseconds)/1e3,e=Pe(this._days),f=Pe(this._months);a=q(d/60),b=q(a/60),d%=60,a%=60,c=q(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var Zc,$c=a.momentProperties=[],_c=!1,ad={};a.suppressDeprecationWarnings=!1;var bd,cd={},dd={},ed=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,fd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,gd={},hd={},id=/\d/,jd=/\d\d/,kd=/\d{3}/,ld=/\d{4}/,md=/[+-]?\d{6}/,nd=/\d\d?/,od=/\d\d\d\d?/,pd=/\d\d\d\d\d\d?/,qd=/\d{1,3}/,rd=/\d{1,4}/,sd=/[+-]?\d{1,6}/,td=/\d+/,ud=/[+-]?\d+/,vd=/Z|[+-]\d\d:?\d\d/gi,wd=/Z|[+-]\d\d(?::?\d\d)?/gi,xd=/[+-]?\d+(\.\d{1,3})?/,yd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,zd={},Ad={},Bd=0,Cd=1,Dd=2,Ed=3,Fd=4,Gd=5,Hd=6,Id=7,Jd=8;R("M",["MM",2],"Mo",function(){return this.month()+1}),R("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),R("MMMM",0,0,function(a){return this.localeData().months(this,a)}),J("month","M"),W("M",nd),W("MM",nd,jd),W("MMM",function(a,b){return b.monthsShortRegex(a)}),W("MMMM",function(a,b){return b.monthsRegex(a)}),$(["M","MM"],function(a,b){b[Cd]=r(a)-1}),$(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[Cd]=e:j(c).invalidMonth=a});var Kd=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Ld="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Md="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Nd=yd,Od=yd,Pd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Qd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Rd=/Z|[+-]\d\d(?::?\d\d)?/,Sd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Td=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ud=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=u("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),R("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a}),R(0,["YY",2],0,function(){return this.year()%100}),R(0,["YYYY",4],0,"year"),R(0,["YYYYY",5],0,"year"),R(0,["YYYYYY",6,!0],0,"year"),J("year","y"),W("Y",ud),W("YY",nd,jd),W("YYYY",rd,ld),W("YYYYY",sd,md),W("YYYYYY",sd,md),$(["YYYYY","YYYYYY"],Bd),$("YYYY",function(b,c){c[Bd]=2===b.length?a.parseTwoDigitYear(b):r(b);
}),$("YY",function(b,c){c[Bd]=a.parseTwoDigitYear(b)}),$("Y",function(a,b){b[Bd]=parseInt(a,10)}),a.parseTwoDigitYear=function(a){return r(a)+(r(a)>68?1900:2e3)};var Vd=M("FullYear",!1);a.ISO_8601=function(){};var Wd=u("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Ja.apply(null,arguments);return this.isValid()&&a.isValid()?this>a?this:a:l()}),Xd=u("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Ja.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:l()}),Yd=function(){return Date.now?Date.now():+new Date};Pa("Z",":"),Pa("ZZ",""),W("Z",wd),W("ZZ",wd),$(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Qa(wd,a)});var Zd=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var $d=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,_d=/^(-)?P(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)W)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?$/;cb.fn=Na.prototype;var ae=hb(1,"add"),be=hb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var ce=u("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});R(0,["gg",2],0,function(){return this.weekYear()%100}),R(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ob("gggg","weekYear"),Ob("ggggg","weekYear"),Ob("GGGG","isoWeekYear"),Ob("GGGGG","isoWeekYear"),J("weekYear","gg"),J("isoWeekYear","GG"),W("G",ud),W("g",ud),W("GG",nd,jd),W("gg",nd,jd),W("GGGG",rd,ld),W("gggg",rd,ld),W("GGGGG",sd,md),W("ggggg",sd,md),_(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=r(a)}),_(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),R("Q",0,"Qo","quarter"),J("quarter","Q"),W("Q",id),$("Q",function(a,b){b[Cd]=3*(r(a)-1)}),R("w",["ww",2],"wo","week"),R("W",["WW",2],"Wo","isoWeek"),J("week","w"),J("isoWeek","W"),W("w",nd),W("ww",nd,jd),W("W",nd),W("WW",nd,jd),_(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=r(a)});var de={dow:0,doy:6};R("D",["DD",2],"Do","date"),J("date","D"),W("D",nd),W("DD",nd,jd),W("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),$(["D","DD"],Dd),$("Do",function(a,b){b[Dd]=r(a.match(nd)[0],10)});var ee=M("Date",!0);R("d",0,"do","day"),R("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),R("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),R("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),R("e",0,0,"weekday"),R("E",0,0,"isoWeekday"),J("day","d"),J("weekday","e"),J("isoWeekday","E"),W("d",nd),W("e",nd),W("E",nd),W("dd",yd),W("ddd",yd),W("dddd",yd),_(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:j(c).invalidWeekday=a}),_(["d","e","E"],function(a,b,c,d){b[d]=r(a)});var fe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ge="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),he="Su_Mo_Tu_We_Th_Fr_Sa".split("_");R("DDD",["DDDD",3],"DDDo","dayOfYear"),J("dayOfYear","DDD"),W("DDD",qd),W("DDDD",kd),$(["DDD","DDDD"],function(a,b,c){c._dayOfYear=r(a)}),R("H",["HH",2],0,"hour"),R("h",["hh",2],0,ic),R("hmm",0,0,function(){return""+ic.apply(this)+Q(this.minutes(),2)}),R("hmmss",0,0,function(){return""+ic.apply(this)+Q(this.minutes(),2)+Q(this.seconds(),2)}),R("Hmm",0,0,function(){return""+this.hours()+Q(this.minutes(),2)}),R("Hmmss",0,0,function(){return""+this.hours()+Q(this.minutes(),2)+Q(this.seconds(),2)}),jc("a",!0),jc("A",!1),J("hour","h"),W("a",kc),W("A",kc),W("H",nd),W("h",nd),W("HH",nd,jd),W("hh",nd,jd),W("hmm",od),W("hmmss",pd),W("Hmm",od),W("Hmmss",pd),$(["H","HH"],Ed),$(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),$(["h","hh"],function(a,b,c){b[Ed]=r(a),j(c).bigHour=!0}),$("hmm",function(a,b,c){var d=a.length-2;b[Ed]=r(a.substr(0,d)),b[Fd]=r(a.substr(d)),j(c).bigHour=!0}),$("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[Ed]=r(a.substr(0,d)),b[Fd]=r(a.substr(d,2)),b[Gd]=r(a.substr(e)),j(c).bigHour=!0}),$("Hmm",function(a,b,c){var d=a.length-2;b[Ed]=r(a.substr(0,d)),b[Fd]=r(a.substr(d))}),$("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[Ed]=r(a.substr(0,d)),b[Fd]=r(a.substr(d,2)),b[Gd]=r(a.substr(e))});var ie=/[ap]\.?m?\.?/i,je=M("Hours",!0);R("m",["mm",2],0,"minute"),J("minute","m"),W("m",nd),W("mm",nd,jd),$(["m","mm"],Fd);var ke=M("Minutes",!1);R("s",["ss",2],0,"second"),J("second","s"),W("s",nd),W("ss",nd,jd),$(["s","ss"],Gd);var le=M("Seconds",!1);R("S",0,0,function(){return~~(this.millisecond()/100)}),R(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),R(0,["SSS",3],0,"millisecond"),R(0,["SSSS",4],0,function(){return 10*this.millisecond()}),R(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),R(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),R(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),R(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),R(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),J("millisecond","ms"),W("S",qd,id),W("SS",qd,jd),W("SSS",qd,kd);var me;for(me="SSSS";me.length<=9;me+="S")W(me,td);for(me="S";me.length<=9;me+="S")$(me,nc);var ne=M("Milliseconds",!1);R("z",0,0,"zoneAbbr"),R("zz",0,0,"zoneName");var oe=o.prototype;oe.add=ae,oe.calendar=jb,oe.clone=kb,oe.diff=rb,oe.endOf=Db,oe.format=vb,oe.from=wb,oe.fromNow=xb,oe.to=yb,oe.toNow=zb,oe.get=P,oe.invalidAt=Mb,oe.isAfter=lb,oe.isBefore=mb,oe.isBetween=nb,oe.isSame=ob,oe.isSameOrAfter=pb,oe.isSameOrBefore=qb,oe.isValid=Kb,oe.lang=ce,oe.locale=Ab,oe.localeData=Bb,oe.max=Xd,oe.min=Wd,oe.parsingFlags=Lb,oe.set=P,oe.startOf=Cb,oe.subtract=be,oe.toArray=Hb,oe.toObject=Ib,oe.toDate=Gb,oe.toISOString=ub,oe.toJSON=Jb,oe.toString=tb,oe.unix=Fb,oe.valueOf=Eb,oe.creationData=Nb,oe.year=Vd,oe.isLeapYear=sa,oe.weekYear=Pb,oe.isoWeekYear=Qb,oe.quarter=oe.quarters=Vb,oe.month=ga,oe.daysInMonth=ha,oe.week=oe.weeks=Zb,oe.isoWeek=oe.isoWeeks=$b,oe.weeksInYear=Sb,oe.isoWeeksInYear=Rb,oe.date=ee,oe.day=oe.days=ec,oe.weekday=fc,oe.isoWeekday=gc,oe.dayOfYear=hc,oe.hour=oe.hours=je,oe.minute=oe.minutes=ke,oe.second=oe.seconds=le,oe.millisecond=oe.milliseconds=ne,oe.utcOffset=Ta,oe.utc=Va,oe.local=Wa,oe.parseZone=Xa,oe.hasAlignedHourOffset=Ya,oe.isDST=Za,oe.isDSTShifted=$a,oe.isLocal=_a,oe.isUtcOffset=ab,oe.isUtc=bb,oe.isUTC=bb,oe.zoneAbbr=oc,oe.zoneName=pc,oe.dates=u("dates accessor is deprecated. Use date instead.",ee),oe.months=u("months accessor is deprecated. Use month instead",ga),oe.years=u("years accessor is deprecated. Use year instead",Vd),oe.zone=u("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Ua);var pe=oe,qe={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},re={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},se="Invalid date",te="%d",ue=/\d{1,2}/,ve={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},we=A.prototype;we._calendar=qe,we.calendar=sc,we._longDateFormat=re,we.longDateFormat=tc,we._invalidDate=se,we.invalidDate=uc,we._ordinal=te,we.ordinal=vc,we._ordinalParse=ue,we.preparse=wc,we.postformat=wc,we._relativeTime=ve,we.relativeTime=xc,we.pastFuture=yc,we.set=y,we.months=ca,we._months=Ld,we.monthsShort=da,we._monthsShort=Md,we.monthsParse=ea,we._monthsRegex=Od,we.monthsRegex=ja,we._monthsShortRegex=Nd,we.monthsShortRegex=ia,we.week=Wb,we._week=de,we.firstDayOfYear=Yb,we.firstDayOfWeek=Xb,we.weekdays=ac,we._weekdays=fe,we.weekdaysMin=cc,we._weekdaysMin=he,we.weekdaysShort=bc,we._weekdaysShort=ge,we.weekdaysParse=dc,we.isPM=lc,we._meridiemParse=ie,we.meridiem=mc,E("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===r(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=u("moment.lang is deprecated. Use moment.locale instead.",E),a.langData=u("moment.langData is deprecated. Use moment.localeData instead.",H);var xe=Math.abs,ye=Qc("ms"),ze=Qc("s"),Ae=Qc("m"),Be=Qc("h"),Ce=Qc("d"),De=Qc("w"),Ee=Qc("M"),Fe=Qc("y"),Ge=Sc("milliseconds"),He=Sc("seconds"),Ie=Sc("minutes"),Je=Sc("hours"),Ke=Sc("days"),Le=Sc("months"),Me=Sc("years"),Ne=Math.round,Oe={s:45,m:45,h:22,d:26,M:11},Pe=Math.abs,Qe=Na.prototype;Qe.abs=Gc,Qe.add=Ic,Qe.subtract=Jc,Qe.as=Oc,Qe.asMilliseconds=ye,Qe.asSeconds=ze,Qe.asMinutes=Ae,Qe.asHours=Be,Qe.asDays=Ce,Qe.asWeeks=De,Qe.asMonths=Ee,Qe.asYears=Fe,Qe.valueOf=Pc,Qe._bubble=Lc,Qe.get=Rc,Qe.milliseconds=Ge,Qe.seconds=He,Qe.minutes=Ie,Qe.hours=Je,Qe.days=Ke,Qe.weeks=Tc,Qe.months=Le,Qe.years=Me,Qe.humanize=Xc,Qe.toISOString=Yc,Qe.toString=Yc,Qe.toJSON=Yc,Qe.locale=Ab,Qe.localeData=Bb,Qe.toIsoString=u("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Yc),Qe.lang=ce,R("X",0,0,"unix"),R("x",0,0,"valueOf"),W("x",ud),W("X",xd),$("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),$("x",function(a,b,c){c._d=new Date(r(a))}),a.version="2.12.0",b(Ja),a.fn=pe,a.min=La,a.max=Ma,a.now=Yd,a.utc=h,a.unix=qc,a.months=Bc,a.isDate=d,a.locale=E,a.invalid=l,a.duration=cb,a.isMoment=p,a.weekdays=Dc,a.parseZone=rc,a.localeData=H,a.isDuration=Oa,a.monthsShort=Cc,a.weekdaysMin=Fc,a.defineLocale=F,a.updateLocale=G,a.locales=I,a.weekdaysShort=Ec,a.normalizeUnits=K,a.relativeTimeThreshold=Wc,a.prototype=pe;var Re=a;return Re});

</script>


<script>


// daterangepicker.js
// version : 0.0.9
// author : Chunlong Liu
// last updated at: 2015-10-30
// license : MIT
// www.jszen.com

(function (factory) {
    if (typeof define === 'function' && define.amd) {
      // AMD. Register as an anonymous module.
      define(['jquery', 'moment'], factory);
    } else if (typeof exports === 'object' && typeof module !== 'undefined') {
      // CommonJS. Register as a module
      module.exports = factory(require('jquery'), require('moment'));
    } else {
      // Browser globals
      factory(jQuery, moment);
    }
}(function ($, moment)
{

  $.dateRangePickerLanguages =
  {
    'default':  //default language: English
    {
      'selected': 'Selected:',
      'day':'Day',
      'days': 'Days',
      'apply': 'Close',
      'week-1' : 'mo',
      'week-2' : 'tu',
      'week-3' : 'we',
      'week-4' : 'th',
      'week-5' : 'fr',
      'week-6' : 'sa',
      'week-7' : 'su',
      'week-number': 'W',
      'month-name': ['january','february','march','april','may','june','july','august','september','october','november','december'],
      'shortcuts' : 'Shortcuts',
      'custom-values': 'Custom Values',
      'past': 'Past',
      'following':'Following',
      'previous' : 'Previous',
      'prev-week' : 'Week',
      'prev-month' : 'Month',
      'prev-year' : 'Year',
      'next':'Next',
      'next-week':'Week',
      'next-month':'Month',
      'next-year':'Year',
      'less-than' : 'Date range should not be more than %d days',
      'more-than' : 'Date range should not be less than %d days',
      'default-more' : 'Please select a date range longer than %d days',
      'default-single' : 'Please select a date',
      'default-less' : 'Please select a date range less than %d days',
      'default-range' : 'Please select a date range between %d and %d days',
      'default-default': 'Please select a date range',
      'time':'Time',
      'hour':'Hour',
      'minute':'Minute'
    },
    'az':
    {
      'selected': 'Seçildi:',
      'day':' gün',
      'days': ' gün',
      'apply': 'tətbiq',
      'week-1' : '1',
      'week-2' : '2',
      'week-3' : '3',
      'week-4' : '4',
      'week-5' : '5',
      'week-6' : '6',
      'week-7' : '7',
      'month-name': ['yanvar','fevral','mart','aprel','may','iyun','iyul','avqust','sentyabr','oktyabr','noyabr','dekabr'],
      'shortcuts' : 'Qısayollar',
      'past': 'Keçmiş',
      'following':'Növbəti',
      'previous' : '&nbsp;&nbsp;&nbsp;',
      'prev-week' : 'Öncəki həftə',
      'prev-month' : 'Öncəki ay',
      'prev-year' : 'Öncəki il',
      'next': '&nbsp;&nbsp;&nbsp;',
      'next-week':'Növbəti həftə',
      'next-month':'Növbəti ay',
      'next-year':'Növbəti il',
      'less-than' : 'Tarix aralığı %d gündən çox olmamalıdır',
      'more-than' : 'Tarix aralığı %d gündən az olmamalıdır',
      'default-more' : '%d gündən çox bir tarix seçin',
      'default-single' : 'Tarix seçin',
      'default-less' : '%d gündən az bir tarix seçin',
      'default-range' : '%d və %d gün aralığında tarixlər seçin',
      'default-default': 'Tarix aralığı seçin'
    },
    'cn':  //simplified chinese
    {
      'selected': '已选择:',
      'day':'天',
      'days': '天',
      'apply': '确定',
      'week-1' : '一',
      'week-2' : '二',
      'week-3' : '三',
      'week-4' : '四',
      'week-5' : '五',
      'week-6' : '六',
      'week-7' : '日',
      'week-number': '周',
      'month-name': ['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月'],
      'shortcuts' : '快捷选择',
      'past': '过去',
      'following':'将来',
      'previous' : '&nbsp;&nbsp;&nbsp;',
      'prev-week' : '上周',
      'prev-month' : '上个月',
      'prev-year' : '去年',
      'next': '&nbsp;&nbsp;&nbsp;',
      'next-week':'下周',
      'next-month':'下个月',
      'next-year':'明年',
      'less-than' : '所选日期范围不能大于%d天',
      'more-than' : '所选日期范围不能小于%d天',
      'default-more' : '请选择大于%d天的日期范围',
      'default-less' : '请选择小于%d天的日期范围',
      'default-range' : '请选择%d天到%d天的日期范围',
      'default-single':'请选择一个日期',
      'default-default': '请选择一个日期范围',
      'time':'时间',
      'hour':'小时',
      'minute':'分钟'
    },
    'cz':
    {
      'selected': 'Vybráno:',
      'day':'Den',
      'days': 'Dny',
      'apply': 'Zavřít',
      'week-1' : 'po',
      'week-2' : 'út',
      'week-3' : 'st',
      'week-4' : 'čt',
      'week-5' : 'pá',
      'week-6' : 'so',
      'week-7' : 'ne',
      'month-name': ['leden','únor','březen','duben','květen','červen','červenec','srpen','září','říjen','listopad','prosinec'],
      'shortcuts' : 'Zkratky',
      'past': 'po',
      'following':'následující',
      'previous' : 'předchozí',
      'prev-week' : 'týden',
      'prev-month' : 'měsíc',
      'prev-year' : 'rok',
      'next':'další',
      'next-week':'týden',
      'next-month':'měsíc',
      'next-year':'rok',
      'less-than' : 'Rozsah data by neměl být větší než %d dnů',
      'more-than' : 'Rozsah data by neměl být menší než %d dnů',
      'default-more' : 'Prosím zvolte rozsah data větší než %d dnů',
      'default-single' : 'Prosím zvolte datum',
      'default-less' : 'Prosím zvolte rozsah data menší než %d dnů',
      'default-range' : 'Prosím zvolte rozsah data mezi %d a %d dny',
      'default-default': 'Prosím zvolte rozsah data'
    },
    'de':
    {
      'selected': 'Auswahl:',
      'day':'Tag',
      'days': 'Tage',
      'apply': 'Schließen',
      'week-1' : 'mo',
      'week-2' : 'di',
      'week-3' : 'mi',
      'week-4' : 'do',
      'week-5' : 'fr',
      'week-6' : 'sa',
      'week-7' : 'so',
      'month-name': ['januar','februar','märz','april','mai','juni','juli','august','september','oktober','november','dezember'],
      'shortcuts' : 'Schnellwahl',
      'past': 'Vorherige',
      'following':'Folgende',
      'previous' : 'Vorherige',
      'prev-week' : 'Woche',
      'prev-month' : 'Monat',
      'prev-year' : 'Jahr',
      'next':'Nächste',
      'next-week':'Woche',
      'next-month':'Monat',
      'next-year':'Jahr',
      'less-than' : 'Datumsbereich darf nicht größer sein als %d Tage',
      'more-than' : 'Datumsbereich darf nicht kleiner sein als %d Tage',
      'default-more' : 'Bitte mindestens %d Tage auswählen',
      'default-single' : 'Bitte ein Datum auswählen',
      'default-less' : 'Bitte weniger als %d Tage auswählen',
      'default-range' : 'Bitte einen Datumsbereich zwischen %d und %d Tagen auswählen',
      'default-default': 'Bitte ein Start- und Enddatum auswählen',
      'Time': 'Zeit',
      'hour': 'Stunde',
      'minute': 'Minute',
    },
    'es':
    {
      'selected': 'Seleccionado:',
      'day':'Dia',
      'days': 'Dias',
      'apply': 'Cerrar',
      'week-1' : 'lu',
      'week-2' : 'ma',
      'week-3' : 'mi',
      'week-4' : 'ju',
      'week-5' : 'vi',
      'week-6' : 'sa',
      'week-7' : 'do',
      'month-name': ['enero','febrero','marzo','abril','mayo','junio','julio','agosto','septiembre','octubre','noviembre','diciembre'],
      'shortcuts' : 'Accesos directos',
      'past': 'Pasado',
      'following':'Siguiente',
      'previous' : 'Anterior',
      'prev-week' : 'Semana',
      'prev-month' : 'Mes',
      'prev-year' : 'Año',
      'next':'Siguiente',
      'next-week':'Semana',
      'next-month':'Mes',
      'next-year':'Año',
      'less-than' : 'El rango no deberia ser mayor de %d dias',
      'more-than' : 'El rango no deberia ser menor de %d dias',
      'default-more' : 'Por favor selecciona un rango mayor a %d dias',
      'default-single' : 'Por favor selecciona un dia',
      'default-less' : 'Por favor selecciona un rango menor a %d dias',
      'default-range' : 'Por favor selecciona un rango entre %d y %d dias',
      'default-default': 'Por favor selecciona un rango de fechas.'
    },
    'fr':
    {
      'selected': 'Sélection:',
      'day':'Jour',
      'days': 'Jours',
      'apply': 'Fermer',
      'week-1' : 'lu',
      'week-2' : 'ma',
      'week-3' : 'me',
      'week-4' : 'je',
      'week-5' : 've',
      'week-6' : 'sa',
      'week-7' : 'di',
      'month-name': ['janvier','février','mars','avril','mai','juin','juillet','août','septembre','octobre','novembre','décembre'],
      'shortcuts' : 'Raccourcis',
      'past': 'Passé',
      'following':'Suivant',
      'previous' : 'Précédent',
      'prev-week' : 'Semaine',
      'prev-month' : 'Mois',
      'prev-year' : 'Année',
      'next':'Suivant',
      'next-week':'Semaine',
      'next-month':'Mois',
      'next-year':'Année',
      'less-than' : 'L\'intervalle ne doit pas être supérieure à %d jours',
      'more-than' : 'L\'intervalle ne doit pas être inférieure à %d jours',
      'default-more' : 'Merci de choisir une intervalle supérieure à %d jours',
      'default-single' : 'Merci de choisir une date',
      'default-less' : 'Merci de choisir une intervalle inférieure %d jours',
      'default-range' : 'Merci de choisir une intervalle comprise entre %d et %d jours',
      'default-default': 'Merci de choisir une date'
    },
    'hu':
    {
      'selected': 'Kiválasztva:',
      'day':'Nap',
      'days': 'Nap',
      'apply': 'Ok',
      'week-1' : 'h',
      'week-2' : 'k',
      'week-3' : 'sz',
      'week-4' : 'cs',
      'week-5' : 'p',
      'week-6' : 'sz',
      'week-7' : 'v',
      'month-name': ['január','február','március','április','május','június','július','augusztus','szeptember','október','november','december'],
      'shortcuts' : 'Gyorsválasztó',
      'past': 'Múlt',
      'following':'Következő',
      'previous' : 'Előző',
      'prev-week' : 'Hét',
      'prev-month' : 'Hónap',
      'prev-year' : 'Év',
      'next':'Következő',
      'next-week':'Hét',
      'next-month':'Hónap',
      'next-year':'Év',
      'less-than' : 'A kiválasztás nem lehet több %d napnál',
      'more-than' : 'A kiválasztás nem lehet több %d napnál',
      'default-more' : 'Válassz ki egy időszakot ami hosszabb mint %d nap',
      'default-single' : 'Válassz egy napot',
      'default-less' : 'Válassz ki egy időszakot ami rövidebb mint %d nap',
      'default-range' : 'Válassz ki egy %d - %d nap hosszú időszakot',
      'default-default': 'Válassz ki egy időszakot'
    },
    'it':
    {
      'selected': 'Selezionati:',
      'day':'Giorno',
      'days': 'Giorni',
      'apply': 'Chiudi',
      'week-1' : 'lu',
      'week-2' : 'ma',
      'week-3' : 'me',
      'week-4' : 'gi',
      'week-5' : 've',
      'week-6' : 'sa',
      'week-7' : 'do',
      'month-name': ['gennaio','febbraio','marzo','aprile','maggio','giugno','luglio','agosto','settembre','ottobre','novembre','dicembre'],
      'shortcuts' : 'Scorciatoie',
      'past': 'Scorso',
      'following':'Successivo',
      'previous' : 'Precedente',
      'prev-week' : 'Settimana',
      'prev-month' : 'Mese',
      'prev-year' : 'Anno',
      'next':'Prossimo',
      'next-week':'Settimana',
      'next-month':'Mese',
      'next-year':'Anno',
      'less-than' : 'L\'intervallo non dev\'essere maggiore di %d giorni',
      'more-than' : 'L\'intervallo non dev\'essere minore di %d giorni',
      'default-more' : 'Seleziona un intervallo maggiore di %d giorni',
      'default-single' : 'Seleziona una data',
      'default-less' : 'Seleziona un intervallo minore di %d giorni',
      'default-range' : 'Seleziona un intervallo compreso tra i %d e i %d giorni',
      'default-default': 'Seleziona un intervallo di date'
    },
    'no':
    {
      'selected': 'Valgt:',
      'day':'Dag',
      'days': 'Dager',
      'apply': 'Lukk',
      'week-1' : 'ma',
      'week-2' : 'ti',
      'week-3' : 'on',
      'week-4' : 'to',
      'week-5' : 'fr',
      'week-6' : 'lø',
      'week-7' : 'sø',
      'month-name': ['januar','februar','mars','april','mai','juni','juli','august','september','oktober','november','desember'],
      'shortcuts' : 'Snarveier',
      'custom-values': 'Egendefinerte Verdier',
      'past': 'Over', // Not quite sure about the context of this one
      'following':'Følger',
      'previous' : 'Forrige',
      'prev-week' : 'Uke',
      'prev-month' : 'Måned',
      'prev-year' : 'År',
      'next':'Neste',
      'next-week':'Uke',
      'next-month':'Måned',
      'next-year':'År',
      'less-than' : 'Datoperioden skal ikkje være lengre enn %d dager',
      'more-than' : 'Datoperioden skal ikkje være kortere enn %d dager',
      'default-more' : 'Vennligst velg ein datoperiode lengre enn %d dager',
      'default-single' : 'Vennligst velg ein dato',
      'default-less' : 'Vennligst velg ein datoperiode mindre enn %d dager',
      'default-range' : 'Vennligst velg ein datoperiode mellom %d og %d dager',
      'default-default': 'Vennligst velg ein datoperiode',
      'time':'Tid',
      'hour':'Time',
      'minute':'Minutter'
    },
    'nl':
    {
      'selected': 'Geselecteerd:',
      'day':'Dag',
      'days': 'Dagen',
      'apply': 'Ok',
      'week-1' : 'ma',
      'week-2' : 'di',
      'week-3' : 'wo',
      'week-4' : 'do',
      'week-5' : 'vr',
      'week-6' : 'za',
      'week-7' : 'zo',
      'month-name': ['januari','februari','maart','april','mei','juni','juli','augustus','september','october','november','december'],
      'shortcuts' : 'Snelkoppelingen',
      'custom-values': 'Aangepaste waarden',
      'past': 'Verleden',
      'following':'Komend',
      'previous' : 'Vorige',
      'prev-week' : 'Week',
      'prev-month' : 'Maand',
      'prev-year' : 'Jaar',
      'next':'Volgende',
      'next-week':'Week',
      'next-month':'Maand',
      'next-year':'Jaar',
      'less-than' : 'Interval moet langer dan %d dagen zijn',
      'more-than' : 'Interval mag niet minder dan %d dagen zijn',
      'default-more' : 'Selecteer een interval langer dan %dagen',
      'default-single' : 'Selecteer een datum',
      'default-less' : 'Selecteer een interval minder dan %d dagen',
      'default-range' : 'Selecteer een interval tussen %d en %d dagen',
      'default-default': 'Selecteer een interval',
      'time':'Tijd',
      'hour':'Uur',
      'minute':'Minuut'
    },
    'ru':
    {
      'selected': 'Выбрано:',
      'day': 'День',
      'days': 'Дней',
      'apply': 'Закрыть',
      'week-1': 'пн',
      'week-2': 'вт',
      'week-3': 'ср',
      'week-4': 'чт',
      'week-5': 'пт',
      'week-6': 'сб',
      'week-7': 'вс',
      'month-name': ['январь','февраль','март','апрель','май','июнь','июль','август','сентябрь','октябрь','ноябрь','декабрь'],
      'shortcuts': 'Быстрый выбор',
      'past': 'Прошедшие',
      'following': 'Следующие',
      'previous': '&nbsp;&nbsp;&nbsp;',
      'prev-week': 'Неделя',
      'prev-month': 'Месяц',
      'prev-year': 'Год',
      'next': '&nbsp;&nbsp;&nbsp;',
      'next-week': 'Неделя',
      'next-month': 'Месяц',
      'next-year': 'Год',
      'less-than': 'Диапазон не может быть больше %d дней',
      'more-than': 'Диапазон не может быть меньше %d дней',
      'default-more': 'Пожалуйста выберите диапазон больше %d дней',
      'default-single': 'Пожалуйста выберите дату',
      'default-less': 'Пожалуйста выберите диапазон меньше %d дней',
      'default-range': 'Пожалуйста выберите диапазон между %d и %d днями',
      'default-default': 'Пожалуйста выберите диапазон'
    },
    'pl':
    {
      'selected': 'Wybrany:',
      'day':'Dzień',
      'days': 'Dni',
      'apply': 'Zamknij',
      'week-1' : 'pon',
      'week-2' : 'wt',
      'week-3' : 'śr',
      'week-4' : 'czw',
      'week-5' : 'pt',
      'week-6' : 'so',
      'week-7' : 'nd',
      'month-name': ['styczeń','luty','marzec','kwiecień','maj','czerwiec','lipiec','sierpień','wrzesień','październik','listopad','grudzień'],
      'shortcuts' : 'Skróty',
      'custom-values': 'Niestandardowe wartości',
      'past': 'Przeszłe',
      'following':'Następne',
      'previous' : 'Poprzednie',
      'prev-week' : 'tydzień',
      'prev-month' : 'miesiąc',
      'prev-year' : 'rok',
      'next':'Następny',
      'next-week':'tydzień',
      'next-month':'miesiąc',
      'next-year':'rok',
      'less-than' : 'Okres nie powinien być dłuższy niż %d dni',
      'more-than' : 'Okres nie powinien być krótszy niż  %d ni',
      'default-more' : 'Wybierz okres dłuższy niż %d dni',
      'default-single' : 'Wybierz datę',
      'default-less' : 'Wybierz okres krótszy niż %d dni',
      'default-range' : 'Wybierz okres trwający od %d do %d dni',
      'default-default': 'Wybierz okres',
      'time':'Czas',
      'hour':'Godzina',
      'minute':'Minuta'
    },
    'se':
    {
      'selected': 'Vald:',
      'day':'dag',
      'days': 'dagar',
      'apply': 'godkänn',
      'week-1' : 'ma',
      'week-2' : 'ti',
      'week-3' : 'on',
      'week-4' : 'to',
      'week-5' : 'fr',
      'week-6' : 'lö',
      'week-7' : 'sö',
      'month-name': ['januari','februari','mars','april','maj','juni','juli','augusti','september','oktober','november','december'],
      'shortcuts' : 'genvägar',
      'custom-values': 'Anpassade värden',
      'past': 'över',
      'following':'följande',
      'previous' : 'förra',
      'prev-week' : 'vecka',
      'prev-month' : 'månad',
      'prev-year' : 'år',
      'next':'nästa',
      'next-week':'vecka',
      'next-month':'måned',
      'next-year':'år',
      'less-than' : 'Datumintervall bör inte vara mindre än %d dagar',
      'more-than' : 'Datumintervall bör inte vara mer än %d dagar',
      'default-more' : 'Välj ett datumintervall längre än %d dagar',
      'default-single' : 'Välj ett datum',
      'default-less' : 'Välj ett datumintervall mindre än %d dagar',
      'default-range' : 'Välj ett datumintervall mellan %d och %d dagar',
      'default-default': 'Välj ett datumintervall',
      'time':'tid',
      'hour':'timme',
      'minute':'minut'
    }
  };

  $.fn.dateRangePicker = function(opt)
  {
    if (!opt) opt = {};
    opt = $.extend(true,
    {
      autoClose: false,
      format: 'YYYY-MM-DD',
      separator: ' to ',
      language: 'auto',
      startOfWeek: 'sunday',// or monday
      getValue: function()
      {
        return $(this).val();
      },
      setValue: function(s)
      {
        if(!$(this).attr('readonly') && !$(this).is(':disabled') && s != $(this).val())
        {
          $(this).val(s);
        }
      },
      startDate: false,
      endDate: false,
      time: {
        enabled: false
      },
      minDays: 0,
      maxDays: 0,
      showShortcuts: false,
      shortcuts:
      {
        //'prev-days': [1,3,5,7],
        // 'next-days': [3,5,7],
        //'prev' : ['week','month','year'],
        // 'next' : ['week','month','year']
      },
      customShortcuts : [],
      inline:false,
      container:'body',
      alwaysOpen:false,
      singleDate:false,
      lookBehind: false,
      batchMode: false,
      duration: 200,
      stickyMonths: false,
      dayDivAttrs: [],
      dayTdAttrs: [],
      selectForward: false,
      selectBackward: false,
      applyBtnClass: '',
      singleMonth: 'auto',
      hoveringTooltip: function(days, startTime, hoveringTime)
      {
        return days > 1 ? days + ' ' + lang('days') : '';
      },
      showTopbar: true,
      swapTime: false,
      showWeekNumbers: false,
      getWeekNumber: function(date) //date will be the first day of a week
      {
        return moment(date).format('w');
      },
      customOpenAnimation: null,
      customCloseAnimation: null
    },opt);

    opt.start = false;
    opt.end = false;

    opt.startWeek = false;

    //detect a touch device
    opt.isTouchDevice = 'ontouchstart' in window || navigator.msMaxTouchPoints;

    //if it is a touch device, hide hovering tooltip
    if (opt.isTouchDevice) opt.hoveringTooltip = false;

    //show one month on mobile devices
    if (opt.singleMonth == 'auto') opt.singleMonth = $(window).width() < 480;
    if (opt.singleMonth) opt.stickyMonths = false;

    if (opt.singleDate) opt.singleMonth = true;

    if (!opt.showTopbar) opt.autoClose = true;

    if (opt.startDate && typeof opt.startDate == 'string') opt.startDate = moment(opt.startDate,opt.format).toDate();
    if (opt.endDate && typeof opt.endDate == 'string') opt.endDate = moment(opt.endDate,opt.format).toDate();

    var langs = getLanguages();
    var box;
    var initiated = false;
    var self = this;
    var selfDom = $(self).get(0);
    var domChangeTimer;

    $(this).unbind('.datepicker').bind('click.datepicker',function(evt)
    {
      var isOpen = box.is(':visible');
      if(!isOpen) open(opt.duration);
    }).bind('change.datepicker', function(evt)
    {
      checkAndSetDefaultValue();
    }).bind('keyup.datepicker',function()
    {
      try{ clearTimeout(domChangeTimer); }catch(e){}
      domChangeTimer = setTimeout(function()
      {
        checkAndSetDefaultValue();
      },2000);
    });

    init_datepicker.call(this);

    if (opt.alwaysOpen)
    {
      open(0);
    }

    // expose some api
    $(this).data('dateRangePicker',
    {
      setDateRange : function(d1,d2,silent)
      {
        if (typeof d1 == 'string' && typeof d2 == 'string')
        {
          d1 = moment(d1,opt.format).toDate();
          d2 = moment(d2,opt.format).toDate();
        }
        setDateRange(d1,d2,silent);
      },
      clear: clearSelection,
      close: closeDatePicker,
      open: open,
      redraw: redrawDatePicker,
      getDatePicker: getDatePicker,
      destroy: function()
      {
        $(self).unbind('.datepicker');
        $(self).data('dateRangePicker','');
        $(self).data('date-picker-opened',null);
        box.remove();
        $(window).unbind('resize.datepicker',calcPosition);
        $(document).unbind('click.datepicker',closeDatePicker);
      }
    });

    $(window).bind('resize.datepicker',calcPosition);

    return this;
    
    function IsOwnDatePickerClicked(evt, selfObj)
    {
      return ( selfObj.contains(evt.target) || evt.target == selfObj  || (selfObj.childNodes != undefined && $.inArray(evt.target, selfObj.childNodes)>=0))
    }

    function init_datepicker()
    {
      var self = this;

      if ($(this).data('date-picker-opened'))
      {
        closeDatePicker();
        return;
      }
      $(this).data('date-picker-opened',true);


      box = createDom().hide();
      box.append('<div class="date-range-length-tip"></div>');
      box.delegate('.day', 'mouseleave', function()
      {
        box.find('.date-range-length-tip').hide();
      });

      $(opt.container).append(box);

      if (!opt.inline)
      {
        calcPosition();
      }
      else
      {
        box.addClass("inline-wrapper");
      }

      if (opt.alwaysOpen)
      {
        box.find('.apply-btn').hide();
      }

      var defaultTime = opt.defaultTime ? opt.defaultTime : new Date();
      if (opt.lookBehind)
      {
        if (opt.startDate && compare_month(defaultTime, opt.startDate) < 0 ) defaultTime = nextMonth(moment(opt.startDate).toDate());
        if (opt.endDate && compare_month(defaultTime,opt.endDate) > 0 ) defaultTime = moment(opt.endDate).toDate();

        showMonth(prevMonth(defaultTime),'month1');
        showMonth(defaultTime,'month2');

      }
      else
      {
        if (opt.startDate && compare_month(defaultTime,opt.startDate) < 0 ) defaultTime = moment(opt.startDate).toDate();
        if (opt.endDate && compare_month(nextMonth(defaultTime),opt.endDate) > 0 ) defaultTime = prevMonth(moment(opt.endDate).toDate());

        showMonth(defaultTime,'month1');
        showMonth(nextMonth(defaultTime),'month2');
      }

      if (opt.singleDate)
      {
        if (opt.startDate && compare_month(defaultTime,opt.startDate) < 0 ) defaultTime = moment(opt.startDate).toDate();
        if (opt.endDate && compare_month(defaultTime,opt.endDate) > 0 ) defaultTime = moment(opt.endDate).toDate();

        showMonth(defaultTime,'month1');
      }

      if (opt.time.enabled)
      {
        if ((opt.startDate && opt.endDate) || (opt.start && opt.end)) {
          showTime(moment(opt.start || opt.startDate).toDate(),'time1');
          showTime(moment(opt.end || opt.endDate).toDate(),'time2');
        } else {
          var defaultEndTime = opt.defaultEndTime ? opt.defaultEndTime : defaultTime;
          showTime(defaultTime,'time1');
          showTime(defaultEndTime,'time2');
        }
      }

      //showSelectedInfo();


      var defaultTopText = '';
      if (opt.singleDate)
        defaultTopText = lang('default-single');
      else if (opt.minDays && opt.maxDays)
        defaultTopText = lang('default-range');
      else if (opt.minDays)
        defaultTopText = lang('default-more');
      else if (opt.maxDays)
        defaultTopText = lang('default-less');
      else
        defaultTopText = lang('default-default');

      box.find('.default-top').html( defaultTopText.replace(/\%d/,opt.minDays).replace(/\%d/,opt.maxDays));
      if (opt.singleMonth)
      {
        box.addClass('single-month');
      }
      else
      {
        box.addClass('two-months');
      }


      setTimeout(function()
      {
        updateCalendarWidth();
        initiated = true;
      },0);

      box.click(function(evt)
      {
        evt.stopPropagation();
      });

      //if user click other place of the webpage, close date range picker window
      $(document).bind('click.datepicker',function(evt)
      {
        if (!IsOwnDatePickerClicked(evt, self[0])) {
          if (box.is(':visible')) closeDatePicker();
        }
      });

      box.find('.next').click(function()
      {
        if(!opt.stickyMonths)
          gotoNextMonth(this);
        else
          gotoNextMonth_stickily(this);
      });

      function gotoNextMonth(self)
      {
        var isMonth2 = $(self).parents('table').hasClass('month2');
        var month = isMonth2 ? opt.month2 : opt.month1;
        month = nextMonth(month);
        if (!opt.singleMonth && !opt.singleDate && !isMonth2 && compare_month(month,opt.month2) >= 0 || isMonthOutOfBounds(month)) return;
        showMonth(month,isMonth2 ? 'month2' : 'month1');
        showGap();
      }

      function gotoNextMonth_stickily(self) {
        var nextMonth1 = nextMonth(opt.month1);
        var nextMonth2 = nextMonth(opt.month2);
        if(isMonthOutOfBounds(nextMonth2)) return;
        if (!opt.singleDate && compare_month(nextMonth1,nextMonth2) >= 0) return;
        showMonth(nextMonth1, 'month1');
        showMonth(nextMonth2, 'month2');
        showSelectedDays();
      }


      box.find('.prev').click(function()
      {
        if(!opt.stickyMonths)
          gotoPrevMonth(this);
        else
          gotoPrevMonth_stickily(this);
      });

      function gotoPrevMonth(self) {
        var isMonth2 = $(self).parents('table').hasClass('month2');
        var month = isMonth2 ? opt.month2 : opt.month1;
        month = prevMonth(month);
        if (isMonth2 && compare_month(month,opt.month1) <= 0 || isMonthOutOfBounds(month)) return;
        showMonth(month,isMonth2 ? 'month2' : 'month1');
        showGap();
      }

      function gotoPrevMonth_stickily(self)
      {
        var prevMonth1 = prevMonth(opt.month1);
        var prevMonth2 = prevMonth(opt.month2);
        if(isMonthOutOfBounds(prevMonth1)) return;
        if(!opt.singleDate && compare_month(prevMonth2,prevMonth1) <= 0) return;
        showMonth(prevMonth2, 'month2');
        showMonth(prevMonth1, 'month1');
        showSelectedDays();
      }

      box.delegate('.day','click', function(evt)
      {
        dayClicked($(this));
      });

      box.delegate('.day','mouseenter',function(evt)
      {
        dayHovering($(this));
      });

      box.delegate('.week-number', 'click', function(evt)
      {
        weekNumberClicked($(this));
      });

      box.attr('unselectable', 'on')
      .css('user-select', 'none')
      .bind('selectstart', function(e)
      {
        e.preventDefault(); return false;
      });

      box.find('.apply-btn').click(function()
      {
        closeDatePicker();
        var dateRange = getDateString(new Date(opt.start))+ opt.separator +getDateString(new Date(opt.end));
        $(self).trigger('datepicker-apply',
        {
          'value': dateRange,
          'date1' : new Date(opt.start),
          'date2' : new Date(opt.end)
        });
      });

      box.find('[custom]').click(function()
      {
        var valueName = $(this).attr('custom');
        opt.start = false;
        opt.end = false;
        box.find('.day.checked').removeClass('checked');
        opt.setValue.call(selfDom, valueName);
        checkSelectionValid();
        showSelectedInfo(true);
        showSelectedDays();
        if (opt.autoClose) closeDatePicker();
      });

      box.find('[shortcut]').click(function()
      {
        var shortcut = $(this).attr('shortcut');
        var end = new Date(),start = false;
        if (shortcut.indexOf('day') != -1)
        {
          var day = parseInt(shortcut.split(',',2)[1],10);
          start = new Date(new Date().getTime() + 86400000*day);
          end = new Date(end.getTime() + 86400000*(day>0?1:-1) );
        }
        else if (shortcut.indexOf('week')!= -1)
        {
          var dir = shortcut.indexOf('prev,') != -1 ? -1 : 1;

          if (dir == 1)
            var stopDay = opt.startOfWeek == 'monday' ? 1 : 0;
          else
            var stopDay = opt.startOfWeek == 'monday' ? 0 : 6;

          end = new Date(end.getTime() - 86400000);
          while(end.getDay() != stopDay) end = new Date(end.getTime() + dir*86400000);
          start = new Date(end.getTime() + dir*86400000*6);
        }
        else if (shortcut.indexOf('month') != -1)
        {
          var dir = shortcut.indexOf('prev,') != -1 ? -1 : 1;
          if (dir == 1)
            start = nextMonth(end);
          else
            start = prevMonth(end);
          start.setDate(1);
          end = nextMonth(start);
          end.setDate(1);
          end = new Date(end.getTime() - 86400000);
        }
        else if (shortcut.indexOf('year') != -1)
        {
          var dir = shortcut.indexOf('prev,') != -1 ? -1 : 1;
          start = new Date();
          start.setFullYear(end.getFullYear() + dir);
          start.setMonth(0);
          start.setDate(1);
          end.setFullYear(end.getFullYear() + dir);
          end.setMonth(11);
          end.setDate(31);
        }
        else if (shortcut == 'custom')
        {
          var name = $(this).html();
          if (opt.customShortcuts && opt.customShortcuts.length > 0)
          {
            for(var i=0;i<opt.customShortcuts.length;i++)
            {
              var sh = opt.customShortcuts[i];
              if (sh.name == name)
              {
                var data = [];
                // try
                // {
                  data = sh['dates'].call();
                //}catch(e){}
                if (data && data.length == 2)
                {
                  start = data[0];
                  end = data[1];
                }

                // if only one date is specified then just move calendars there
                // move calendars to show this date's month and next months
                if (data && data.length == 1)
                {
                  movetodate = data[0];
                  showMonth(movetodate,'month1');
                  showMonth(nextMonth(movetodate),'month2');
                  showGap();
                }

                break;
              }
            }
          }
        }
        if (start && end)
        {
          setDateRange(start,end);
          checkSelectionValid();
        }
      });

      box.find(".time1 input[type=range]").bind("change touchmove mousemove", function (e) {
        var target = e.target,
          hour = target.name == "hour" ? $(target).val().replace(/^(\d{1})$/, "0$1") : undefined,
          min = target.name == "minute" ? $(target).val().replace(/^(\d{1})$/, "0$1") : undefined;
        setTime("time1", hour, min);
      });

      box.find(".time2 input[type=range]").bind("change touchmove mousemove", function (e) {
        var target = e.target,
          hour = target.name == "hour" ? $(target).val().replace(/^(\d{1})$/, "0$1") : undefined,
          min = target.name == "minute" ? $(target).val().replace(/^(\d{1})$/, "0$1") : undefined;
        setTime("time2", hour, min);
      });

    }


    function calcPosition()
    {
      if (!opt.inline)
      {
        var offset = $(self).offset();
            if ($(opt.container).css("position") == "relative")
            {
              var containerOffset = $(opt.container).offset();
              box.css(
              {
                top: offset.top - containerOffset.top + $(self).outerHeight() + 4,
                left: offset.left - containerOffset.left
              });
            }
            else
            {
              if (offset.left < 460) //left to right
              {
                box.css(
                {
                  top: offset.top+$(self).outerHeight() + parseInt($('body').css('border-top') || 0,10 ),
                  left: offset.left
                });
              }
              else
              {
                box.css(
                {
                  top: offset.top+$(self).outerHeight() + parseInt($('body').css('border-top') || 0,10 ),
                  left: offset.left + $(self).width() - box.width() - 16
                });
              }
            }
      }
    }

    // Return the date picker wrapper element
    function getDatePicker()
    {
      return box;
    }

    function open(animationTime)
    {
      calcPosition();
      redrawDatePicker();
      checkAndSetDefaultValue();
      if (opt.customOpenAnimation)
      {
        opt.customOpenAnimation.call(box.get(0), function()
        {
          $(self).trigger('datepicker-opened', {relatedTarget: box});
        });
      }
      else
      {
        box.slideDown(animationTime, function(){
          $(self).trigger('datepicker-opened', {relatedTarget: box});
        });
      }
      $(self).trigger('datepicker-open', {relatedTarget: box});
      showGap();
      updateCalendarWidth();
    }

    function checkAndSetDefaultValue()
    {
      var __default_string = opt.getValue.call(selfDom);
      var defaults = __default_string ? __default_string.split( opt.separator ) : '';

      if (defaults && ((defaults.length==1 && opt.singleDate) || defaults.length>=2))
      {
        var ___format = opt.format;
        if (___format.match(/Do/))
        {

          ___format = ___format.replace(/Do/,'D');
          defaults[0] = defaults[0].replace(/(\d+)(th|nd|st)/,'$1');
          if(defaults.length >= 2){
            defaults[1] = defaults[1].replace(/(\d+)(th|nd|st)/,'$1');
          }
        }
        // set initiated  to avoid triggerring datepicker-change event
        initiated = false;
        if(defaults.length >= 2){
          setDateRange(moment(defaults[0], ___format, moment.locale(opt.language)).toDate(),moment(defaults[1], ___format, moment.locale(opt.language)).toDate());
        }
        else if(defaults.length==1 && opt.singleDate){
          setSingleDate(moment(defaults[0], ___format, moment.locale(opt.language)).toDate());
        }

        initiated = true;
      }
    }

    function updateCalendarWidth()
    {
      var gapMargin = box.find('.gap').css('margin-left');
      if (gapMargin) gapMargin = parseInt(gapMargin);
      var w1 = box.find('.month1').width();
      var w2 = box.find('.gap').width() + ( gapMargin ? gapMargin*2 : 0 );
      var w3 = box.find('.month2').width();
      box.find('.month-wrapper').width(w1 + w2 + w3);
    }

    function renderTime (name, date) {
      box.find("." + name + " input[type=range].hour-range").val(moment(date).hours());
      box.find("." + name + " input[type=range].minute-range").val(moment(date).minutes());
      setTime(name, moment(date).format("HH"), moment(date).format("mm"));
    }

    function changeTime (name, date) {
      opt[name] = parseInt(
        moment(parseInt(date))
          .startOf('day')
          .add(moment(opt[name + "Time"]).format("HH"), 'h')
          .add(moment(opt[name + "Time"]).format("mm"), 'm').valueOf()
        );
    }

    function swapTime () {
      renderTime("time1", opt.start);
      renderTime("time2", opt.end);
    }

    function setTime (name, hour, minute) 
    {
      hour && (box.find("." + name + " .hour-val").text(hour));
      minute && (box.find("." + name + " .minute-val").text(minute));
      switch (name) {
        case "time1":
          if (opt.start) {
            setRange("start", moment(opt.start));
          }
          setRange("startTime", moment(opt.startTime || moment().valueOf()));
          break;
        case "time2":
          if (opt.end) {
            setRange("end", moment(opt.end));
          }
          setRange("endTime", moment(opt.endTime || moment().valueOf()));
          break;
      }
      function setRange(name, timePoint) {
        var h = timePoint.format("HH"),
          m = timePoint.format("mm");
        opt[name] = timePoint
          .startOf('day')
          .add(hour || h, "h")
          .add(minute || m, "m")
          .valueOf();
      }
      checkSelectionValid();
      showSelectedInfo();
      showSelectedDays();
    }

    function clearSelection()
    {
      opt.start = false;
      opt.end = false;
      box.find('.day.checked').removeClass('checked');
      box.find('.day.last-date-selected').removeClass('last-date-selected');
      box.find('.day.first-date-selected').removeClass('first-date-selected');
      opt.setValue.call(selfDom, '');
      checkSelectionValid();
      showSelectedInfo();
      showSelectedDays();
    }

    function handleStart(time)
    {
      var r = time;
      if  (opt.batchMode === 'week-range')
      {
        if (opt.startOfWeek === 'monday')
        {
          r = moment(parseInt(time)).startOf('isoweek').valueOf();
        }
        else
        {
          r = moment(parseInt(time)).startOf('week').valueOf();
        }
      }
      else if (opt.batchMode === 'month-range')
      {
        r = moment(parseInt(time)).startOf('month').valueOf();
      }
      return r;
    }

    function handleEnd(time)
    {
      var r = time;
      if  (opt.batchMode === 'week-range')
      {
        if (opt.startOfWeek === 'monday')
        {
          r = moment(parseInt(time)).endOf('isoweek').valueOf();
        }
        else
        {
          r = moment(parseInt(time)).endOf('week').valueOf();
        }
      }
      else if (opt.batchMode === 'month-range')
      {
        r = moment(parseInt(time)).endOf('month').valueOf();
      }
      return r;
    }


    function dayClicked(day)
    {
      if (day.hasClass('invalid')) return;
      var time = day.attr('time');
      day.addClass('checked');
      if ( opt.singleDate )
      {
        opt.start = time;
        opt.end = false;
      }
      else if  (opt.batchMode === 'week')
      {
        if (opt.startOfWeek === 'monday') {
          opt.start = moment(parseInt(time)).startOf('isoweek').valueOf();
          opt.end = moment(parseInt(time)).endOf('isoweek').valueOf();
        } else {
          opt.end = moment(parseInt(time)).endOf('week').valueOf();
          opt.start = moment(parseInt(time)).startOf('week').valueOf();
        }
      }
      else if  (opt.batchMode === 'workweek')
      {
        opt.start = moment(parseInt(time)).day(1).valueOf();
        opt.end = moment(parseInt(time)).day(5).valueOf();
      }
      else if  (opt.batchMode === 'weekend')
      {
        opt.start = moment(parseInt(time)).day(6).valueOf();
        opt.end = moment(parseInt(time)).day(7).valueOf();
      }
      else if (opt.batchMode === 'month')
      {
        opt.start = moment(parseInt(time)).startOf('month').valueOf();
        opt.end = moment(parseInt(time)).endOf('month').valueOf();
      }
      else if ((opt.start && opt.end) || (!opt.start && !opt.end) )
      {
        opt.start = handleStart(time);
        opt.end = false;
      }
      else if (opt.start)
      {
        opt.end = handleEnd(time);
        if (opt.time.enabled) {
          changeTime("end", opt.end);
        }
      }

      //Update time in case it is enabled and timestamps are available
      if(opt.time.enabled) {
        if(opt.start) {
          changeTime("start", opt.start);
        }
        if(opt.end) {
          changeTime("end", opt.end);
        }
      }

      //In case the start is after the end, swap the timestamps
      if (!opt.singleDate && opt.start && opt.end && opt.start > opt.end)
      {
        var tmp = opt.end;
        opt.end = handleEnd(opt.start);
        opt.start = handleStart(tmp);
        if (opt.time.enabled && opt.swapTime) {
          swapTime();
        }
      }

      opt.start = parseInt(opt.start);
      opt.end = parseInt(opt.end);

      clearHovering();
      if (opt.start && !opt.end)
      {
        $(self).trigger('datepicker-first-date-selected',
        {
          'date1' : new Date(opt.start)
        });
        dayHovering(day);
      }
      updateSelectableRange(time);

      checkSelectionValid();
      showSelectedInfo();
      showSelectedDays();
      autoclose();
    }

    
    function weekNumberClicked(weekNumberDom)
    {
      var thisTime = parseInt(weekNumberDom.attr('data-start-time'),10);
      if (!opt.startWeek)
      {
        opt.startWeek = thisTime;
        weekNumberDom.addClass('week-number-selected');
        var date1 = new Date(thisTime);
        opt.start = moment(date1).day(opt.startOfWeek == 'monday' ? 1 : 0).toDate();
        opt.end = moment(date1).day(opt.startOfWeek == 'monday' ? 7 : 6).toDate();
      }
      else
      {
        box.find('.week-number-selected').removeClass('week-number-selected');
        var date1 = new Date(thisTime < opt.startWeek ? thisTime : opt.startWeek);
        var date2 = new Date(thisTime < opt.startWeek ? opt.startWeek : thisTime);
        opt.startWeek = false;
        opt.start = moment(date1).day(opt.startOfWeek == 'monday' ? 1 : 0).toDate();
        opt.end = moment(date2).day(opt.startOfWeek == 'monday' ? 7 : 6).toDate();
      }
      updateSelectableRange();
      checkSelectionValid();
      showSelectedInfo();
      showSelectedDays();
      autoclose();
    }

    function isValidTime(time) 
    {
      time = parseInt(time, 10);
      if (opt.startDate && compare_day(time, opt.startDate) < 0) return false;
      if (opt.endDate && compare_day(time, opt.endDate) > 0) return false;

      if (opt.start && !opt.end && !opt.singleDate) 
      {
        //check maxDays and minDays setting
        if (opt.maxDays > 0 && countDays(time, opt.start) > opt.maxDays) return false;
        if (opt.minDays > 0 && countDays(time, opt.start) < opt.minDays) return false;

        //check selectForward and selectBackward
        if (opt.selectForward && time < opt.start ) return false;
        if (opt.selectBackward && time > opt.start) return false;

        //check disabled days
        if (opt.beforeShowDay && typeof opt.beforeShowDay == 'function')
        {
          var valid = true;
          var timeTmp = time;
          while( countDays(timeTmp, opt.start) > 1 )
          {
            var arr = opt.beforeShowDay( new Date(timeTmp) );
            if (!arr[0])
            {
              valid = false;
              break;
            }
            if (Math.abs(timeTmp - opt.start) < 86400000) break;
            if (timeTmp > opt.start) timeTmp -= 86400000;
            if (timeTmp < opt.start) timeTmp += 86400000;
          }
          if (!valid) return false;
        }
      }
      return true;
    }


    function updateSelectableRange()
    {
      box.find('.day.invalid.tmp').removeClass('tmp invalid').addClass('valid');
      if (opt.start && !opt.end)
      {
        box.find('.day.toMonth.valid').each(function()
        {
          var time = parseInt($(this).attr('time'), 10);
          if (!isValidTime(time))
            $(this).addClass('invalid tmp').removeClass('valid');
          else
            $(this).addClass('valid tmp').removeClass('invalid');
        });
      }

      return true;
    }


    function dayHovering(day)
    {
      var hoverTime = parseInt(day.attr('time'));
      var tooltip = '';

      if (day.hasClass('has-tooltip') && day.attr('data-tooltip'))
      {
        tooltip = '<span style="white-space:nowrap">'+day.attr('data-tooltip')+'</span>';
      }
      else if (!day.hasClass('invalid'))
      {
        if (opt.singleDate)
        {
          box.find('.day.hovering').removeClass('hovering');
          day.addClass('hovering');
        }
        else
        {
          box.find('.day').each(function()
          {
            var time = parseInt($(this).attr('time')),
              start = opt.start,
              end = opt.end;

            if ( time == hoverTime )
            {
              $(this).addClass('hovering');
            }
            else
            {
              $(this).removeClass('hovering');
            }

            if (
              ( opt.start && !opt.end )
              &&
              (
                ( opt.start < time && hoverTime >= time )
                ||
                ( opt.start > time && hoverTime <= time )
              )
            )
            {
              $(this).addClass('hovering');
            }
            else
            {
              $(this).removeClass('hovering');
            }
          });

          if (opt.start && !opt.end)
          {
            var days = countDays(hoverTime, opt.start);
            if (opt.hoveringTooltip)
            {
              if (typeof opt.hoveringTooltip == 'function')
              {
                tooltip = opt.hoveringTooltip(days, opt.start, hoverTime);
              }
              else if (opt.hoveringTooltip === true && days > 1)
              {
                tooltip = days + ' ' + lang('days');
              }
            }
          }
        }
      }

      if (tooltip)
      {
        var posDay = day.offset();
        var posBox = box.offset();

        var _left = posDay.left - posBox.left;
        var _top = posDay.top - posBox.top;
        _left += day.width()/2;


        var $tip = box.find('.date-range-length-tip');
        var w = $tip.css({'visibility':'hidden', 'display':'none'}).html(tooltip).width();
        var h = $tip.height();
        _left -= w/2;
        _top -= h;
        setTimeout(function()
        {
          $tip.css({left:_left, top:_top, display:'block','visibility':'visible'});
        },10);
      }
      else
      {
        box.find('.date-range-length-tip').hide();
      }
    }

    function clearHovering()
    {
      box.find('.day.hovering').removeClass('hovering');
      box.find('.date-range-length-tip').hide();
    }

    function autoclose () {
      if (opt.singleDate === true) {
        if (initiated && opt.start )
        {
          if (opt.autoClose) closeDatePicker();
        }
      } else {
        if (initiated && opt.start && opt.end)
        {
          if (opt.autoClose) closeDatePicker();
        }
      }
    }

    function checkSelectionValid()
    {
      var days = Math.ceil( (opt.end - opt.start) / 86400000 ) + 1;
      if (opt.singleDate) { // Validate if only start is there
        if (opt.start && !opt.end)
          box.find('.drp_top-bar').removeClass('error').addClass('normal');
        else
          box.find('.drp_top-bar').removeClass('error').removeClass('normal');
      }
      else if ( opt.maxDays && days > opt.maxDays)
      {
        opt.start = false;
        opt.end = false;
        box.find('.day').removeClass('checked');
        box.find('.drp_top-bar').removeClass('normal').addClass('error').find('.error-top').html( lang('less-than').replace('%d',opt.maxDays) );
      }
      else if ( opt.minDays && days < opt.minDays)
      {
        opt.start = false;
        opt.end = false;
        box.find('.day').removeClass('checked');
        box.find('.drp_top-bar').removeClass('normal').addClass('error').find('.error-top').html( lang('more-than').replace('%d',opt.minDays) );
      }
      else
      {
        if (opt.start || opt.end)
          box.find('.drp_top-bar').removeClass('error').addClass('normal');
        else
          box.find('.drp_top-bar').removeClass('error').removeClass('normal');
      }

      if ( (opt.singleDate && opt.start && !opt.end) || (!opt.singleDate && opt.start && opt.end) )
      {
        box.find('.apply-btn').removeClass('disabled');
      }
      else
      {
        box.find('.apply-btn').addClass('disabled');
      }

      if (opt.batchMode)
      {
        if ( (opt.start && opt.startDate && compare_day(opt.start, opt.startDate) < 0)
          || (opt.end && opt.endDate && compare_day(opt.end, opt.endDate) > 0)  )
        {
          opt.start = false;
          opt.end = false;
          box.find('.day').removeClass('checked');
        }
      }
    }

    function showSelectedInfo(forceValid,silent)
    {
      box.find('.start-day').html('...');
      box.find('.end-day').html('...');
      box.find('.selected-days').hide();
      if (opt.start)
      {
        box.find('.start-day').html(getDateString(new Date(parseInt(opt.start))));
      }
      if (opt.end)
      {
        box.find('.end-day').html(getDateString(new Date(parseInt(opt.end))));
      }

      if (opt.start && opt.singleDate)
      {
        box.find('.apply-btn').removeClass('disabled');
        var dateRange = getDateString(new Date(opt.start));
        opt.setValue.call(selfDom, dateRange, getDateString(new Date(opt.start)), getDateString(new Date(opt.end)));

        if (initiated && !silent)
        {
          $(self).trigger('datepicker-change',
          {
            'value': dateRange,
            'date1' : new Date(opt.start)
          });
        }
      }
      else if (opt.start && opt.end)
      {
        box.find('.selected-days').show().find('.selected-days-num').html(countDays(opt.end, opt.start));
        box.find('.apply-btn').removeClass('disabled');
        var dateRange = getDateString(new Date(opt.start))+ opt.separator +getDateString(new Date(opt.end));
        opt.setValue.call(selfDom,dateRange, getDateString(new Date(opt.start)), getDateString(new Date(opt.end)));
        if (initiated && !silent)
        {
          $(self).trigger('datepicker-change',
          {
            'value': dateRange,
            'date1' : new Date(opt.start),
            'date2' : new Date(opt.end)
          });
        }
      }
      else if (forceValid)
      {
        box.find('.apply-btn').removeClass('disabled');
      }
      else
      {
        box.find('.apply-btn').addClass('disabled');
      }
    }

    function countDays(start,end)
    {
      return Math.abs( daysFrom1970(start) - daysFrom1970(end) ) + 1;
    }

    function setDateRange(date1,date2,silent)
    {
      if (date1.getTime() > date2.getTime())
      {
        var tmp = date2;
        date2 = date1;
        date1 = tmp;
        tmp = null;
      }
      var valid = true;
      if (opt.startDate && compare_day(date1,opt.startDate) < 0) valid = false;
      if (opt.endDate && compare_day(date2,opt.endDate) > 0) valid = false;
      if (!valid)
      {
        showMonth(opt.startDate,'month1');
        showMonth(nextMonth(opt.startDate),'month2');
        showGap();
        return;
      }

      opt.start = date1.getTime();
      opt.end = date2.getTime();

      if (opt.time.enabled)
      {
        renderTime("time1", date1);
        renderTime("time2", date2);
      }

      if (opt.stickyMonths || (compare_day(date1,date2) > 0 && compare_month(date1,date2) == 0))
      {
        if (opt.lookBehind) {
          date1 = prevMonth(date2);
        } else {
          date2 = nextMonth(date1);
        }
      }

      if(opt.stickyMonths && compare_month(date2,opt.endDate) > 0) {
        date1 = prevMonth(date1);
        date2 = prevMonth(date2);
      }

      if (!opt.stickyMonths) {
        if (compare_month(date1,date2) == 0)
        {
          if (opt.lookBehind) {
            date1 = prevMonth(date2);
          } else {
            date2 = nextMonth(date1);
          }
        }
      }

      showMonth(date1,'month1');
      showMonth(date2,'month2');
      showGap();
      checkSelectionValid();
      showSelectedInfo(false,silent);
      autoclose();
    }

    function setSingleDate(date1)
    {

      var valid = true;
      if (opt.startDate && compare_day(date1,opt.startDate) < 0) valid = false;
      if (opt.endDate && compare_day(date1,opt.endDate) > 0) valid = false;
      if (!valid)
      {
        showMonth(opt.startDate,'month1');
        return;
      }

      opt.start = date1.getTime();


      if (opt.time.enabled) {
        renderTime("time1", date1);

      }
      showMonth(date1,'month1');
      //showMonth(date2,'month2');
      showGap();
      showSelectedInfo();
      autoclose();
    }

    function showSelectedDays()
    {
      if (!opt.start && !opt.end) return;
      box.find('.day').each(function()
      {
        var time = parseInt($(this).attr('time')),
          start = opt.start,
          end = opt.end;
        if (opt.time.enabled) {
          time = moment(time).startOf('day').valueOf();
          start = moment(start || moment().valueOf()).startOf('day').valueOf();
          end = moment(end || moment().valueOf()).startOf('day').valueOf();
        }
        if (
          (opt.start && opt.end && end >= time && start <= time )
          || ( opt.start && !opt.end && moment(start).format('YYYY-MM-DD') == moment(time).format('YYYY-MM-DD') )
        )
        {
          $(this).addClass('checked');
        }
        else
        {
          $(this).removeClass('checked');
        }

        //add first-date-selected class name to the first date selected
        if ( opt.start && moment(start).format('YYYY-MM-DD') == moment(time).format('YYYY-MM-DD') )
        {
          $(this).addClass('first-date-selected');
        }
        else
        {
          $(this).removeClass('first-date-selected');
        }
        //add last-date-selected
        if ( opt.end && moment(end).format('YYYY-MM-DD') == moment(time).format('YYYY-MM-DD') )
        {
          $(this).addClass('last-date-selected');
        }
        else
        {
          $(this).removeClass('last-date-selected');
        }
      });

      box.find('.week-number').each(function()
      {
        if ($(this).attr('data-start-time') == opt.startWeek)
        {
          $(this).addClass('week-number-selected');
        }
      });
    }

    function showMonth(date,month)
    {
      date = moment(date).toDate();
      var monthName = nameMonth(date.getMonth());
      box.find('.'+month+' .month-name').html(monthName+' '+date.getFullYear());
      box.find('.'+month+' tbody').html(createMonthHTML(date));
      opt[month] = date;
      updateSelectableRange();
    }

    function showTime(date,name)
    {
      box.find('.' + name).append(getTimeHTML());
      renderTime(name, date);
    }

    function nameMonth(m)
    {
      return lang('month-name')[m];
    }

    function getDateString(d)
    {
      return moment(d).format(opt.format);
    }

    function showGap()
    {
      showSelectedDays();
      var m1 = parseInt(moment(opt.month1).format('YYYYMM'));
      var m2 = parseInt(moment(opt.month2).format('YYYYMM'));
      var p = Math.abs(m1 - m2);
      var shouldShow = (p > 1 && p !=89);
      if (shouldShow)
      {
        box.addClass('has-gap').removeClass('no-gap').find('.gap').css('visibility','visible');
      }
      else
      {
        box.removeClass('has-gap').addClass('no-gap').find('.gap').css('visibility','hidden');
      }
      var h1 = box.find('table.month1').height();
      var h2 = box.find('table.month2').height();
      box.find('.gap').height(Math.max(h1,h2)+10);
    }

    function closeDatePicker()
    {
      if (opt.alwaysOpen) return;

      var afterAnim = function()
      {
        $(self).data('date-picker-opened',false);
        $(self).trigger('datepicker-closed', {relatedTarget: box});
      };
      if (opt.customCloseAnimation)
      {
        opt.customCloseAnimation.call(box.get(0), afterAnim);
      }
      else
      {
        $(box).slideUp(opt.duration, afterAnim);
      }
      $(self).trigger('datepicker-close', {relatedTarget: box});
    }

    function redrawDatePicker()
    {
      showMonth(opt.month1, 'month1');
      showMonth(opt.month2, 'month2');
    }

    function compare_month(m1,m2)
    {
      var p = parseInt(moment(m1).format('YYYYMM')) - parseInt(moment(m2).format('YYYYMM'));
      if (p > 0 ) return 1;
      if (p == 0) return 0;
      return -1;
    }

    function compare_day(m1,m2)
    {
      var p = parseInt(moment(m1).format('YYYYMMDD')) - parseInt(moment(m2).format('YYYYMMDD'));
      if (p > 0 ) return 1;
      if (p == 0) return 0;
      return -1;
    }

    function nextMonth(month)
    {
      return moment(month).add(1, 'months').toDate();
    }

    function prevMonth(month)
    {
      return moment(month).add(-1, 'months').toDate();
    }

    function getTimeHTML()
    {
      return '<div>\
            <span>'+lang('Time')+': <span class="hour-val">00</span>:<span class="minute-val">00</span></span>\
          </div>\
          <div class="hour">\
            <label>'+lang('Hour')+': <input type="range" class="hour-range" name="hour" min="0" max="23"></label>\
          </div>\
          <div class="minute">\
            <label>'+lang('Minute')+': <input type="range" class="minute-range" name="minute" min="0" max="59"></label>\
          </div>';
    }

    function createDom()
    {
      var html = '<div class="date-picker-wrapper';
      if ( opt.extraClass ) html += ' '+opt.extraClass+' ';
      if ( opt.singleDate ) html += ' single-date ';
      if ( !opt.showShortcuts ) html += ' no-shortcuts ';
      if ( !opt.showTopbar ) html += ' no-topbar ';
      if ( opt.customTopBar) html += ' custom-topbar ';
      html += '">';

      if (opt.showTopbar)
      {
        html += '<div class="drp_top-bar">';

        if (opt.customTopBar)
        {
          if (typeof opt.customTopBar == 'function') opt.customTopBar = opt.customTopBar();
          html += '<div class="custom-top">'+opt.customTopBar+'</div>';
        }
        else
        {
          html += '<div class="normal-top">\
              <span style="color:#333">'+lang('selected')+' </span> <b class="start-day">...</b>';
          if ( ! opt.singleDate ) {
            html += ' <span class="separator-day">'+opt.separator+'</span> <b class="end-day">...</b> <i class="selected-days">(<span class="selected-days-num">3</span> '+lang('days')+')</i>'
          }
          html += '</div>';
          html += '<div class="error-top">error</div>\
            <div class="default-top">default</div>';
        }

        html += '<input type="button" class="apply-btn disabled'+ getApplyBtnClass() +'" value="'+lang('apply')+'" />';
        html += '</div>'
      }

      var _colspan = opt.showWeekNumbers ? 6 : 5;
      html += '<div class="month-wrapper">'
        +'<table class="month1" cellspacing="0" border="0" cellpadding="0"><thead><tr class="caption"><th style="width:27px;"><span class="prev">&lt;</span></th><th colspan="'+_colspan+'" class="month-name"></th><th style="width:27px;">' + (opt.singleDate || !opt.stickyMonths ? '<span class="next">&gt;</span>': '') + '</th></tr><tr class="week-name">'+getWeekHead()+'</thead><tbody></tbody></table>';

      if ( hasMonth2() )
      {
        html += '<div class="gap">'+getGapHTML()+'</div>'
          +'<table class="month2" cellspacing="0" border="0" cellpadding="0"><thead><tr class="caption"><th style="width:27px;">' + (!opt.stickyMonths ? '<span class="prev">&lt;</span>': '') + '</th><th colspan="'+_colspan+'" class="month-name"></th><th style="width:27px;"><span class="next">&gt;</span></th></tr><tr class="week-name">'+getWeekHead()+'</thead><tbody></tbody></table>'
      }
        //+'</div>'
      html += '<div style="clear:both;height:0;font-size:0;"></div>'
        +'<div class="time">'
        +'<div class="time1"></div>'
      if ( ! opt.singleDate ) {
        html += '<div class="time2"></div>'
      }
      html += '</div>'
        +'<div style="clear:both;height:0;font-size:0;"></div>'
        +'</div>';

      html += '<div class="footer">';
      if (opt.showShortcuts)
      {
        html += '<div class="shortcuts"><b>'+lang('shortcuts')+'</b>';

        var data = opt.shortcuts;
        if (data)
        {
          if (data['prev-days'] && data['prev-days'].length > 0)
          {
            html += '&nbsp;<span class="prev-days">'+lang('past');
            for(var i=0;i<data['prev-days'].length; i++)
            {
              var name = data['prev-days'][i];
              name += (data['prev-days'][i] > 1) ? lang('days') : lang('day');
              html += ' <a href="javascript:;" shortcut="day,-'+data['prev-days'][i]+'">'+name+'</a>';
            }
            html+='</span>';
          }

          if (data['next-days'] && data['next-days'].length > 0)
          {
            html += '&nbsp;<span class="next-days">'+lang('following');
            for(var i=0;i<data['next-days'].length; i++)
            {
              var name = data['next-days'][i];
              name += (data['next-days'][i] > 1) ? lang('days') : lang('day');
              html += ' <a href="javascript:;" shortcut="day,'+data['next-days'][i]+'">'+name+'</a>';
            }
            html+= '</span>';
          }

          if (data['prev'] && data['prev'].length > 0)
          {
            html += '&nbsp;<span class="prev-buttons">'+lang('previous');
            for(var i=0;i<data['prev'].length; i++)
            {
              var name = lang('prev-'+data['prev'][i]);
              html += ' <a href="javascript:;" shortcut="prev,'+data['prev'][i]+'">'+name+'</a>';
            }
            html+='</span>';
          }

          if (data['next'] && data['next'].length > 0)
          {
            html += '&nbsp;<span class="next-buttons">'+lang('next');
            for(var i=0;i<data['next'].length; i++)
            {
              var name = lang('next-'+data['next'][i]);
              html += ' <a href="javascript:;" shortcut="next,'+data['next'][i]+'">'+name+'</a>';
            }
            html+='</span>';
          }
        }

        if (opt.customShortcuts)
        {
          for(var i=0;i<opt.customShortcuts.length; i++)
          {
            var sh = opt.customShortcuts[i];
            html+= '&nbsp;<span class="custom-shortcut"><a href="javascript:;" shortcut="custom">'+sh.name+'</a></span>';
          }
        }
        html += '</div>';
      }

      // Add Custom Values Dom
      if (opt.showCustomValues)
      {
        html += '<div class="customValues"><b>'+(opt.customValueLabel || lang('custom-values'))+'</b>';

        if (opt.customValues)
        {
          for(var i=0;i<opt.customValues.length;i++)
          {
            var val = opt.customValues[i];
              html+= '&nbsp;<span class="custom-value"><a href="javascript:;" custom="'+ val.value+'">'+val.name+'</a></span>';
          }
        }
      }

      html += '</div></div>';


      return $(html);
    }

    function getApplyBtnClass()
    {
      var klass = ''
      if (opt.autoClose === true) {
        klass += ' hide';
      }
      if (opt.applyBtnClass !== '') {
        klass += ' ' + opt.applyBtnClass;
      }
      return klass;
    }

    function getWeekHead()
    {
      var prepend = opt.showWeekNumbers ? '<th>'+lang('week-number')+'</th>' : '';
      if (opt.startOfWeek == 'monday')
      {
        return prepend+'<th>'+lang('week-1')+'</th>\
          <th>'+lang('week-2')+'</th>\
          <th>'+lang('week-3')+'</th>\
          <th>'+lang('week-4')+'</th>\
          <th>'+lang('week-5')+'</th>\
          <th>'+lang('week-6')+'</th>\
          <th>'+lang('week-7')+'</th>';
      }
      else
      {
        return prepend+'<th>'+lang('week-7')+'</th>\
          <th>'+lang('week-1')+'</th>\
          <th>'+lang('week-2')+'</th>\
          <th>'+lang('week-3')+'</th>\
          <th>'+lang('week-4')+'</th>\
          <th>'+lang('week-5')+'</th>\
          <th>'+lang('week-6')+'</th>';
      }
    }

    function isMonthOutOfBounds(month)
    {
      var month = moment(month);
      if (opt.startDate && month.endOf('month').isBefore(opt.startDate))
      {
        return true;
      }
      if (opt.endDate && month.startOf('month').isAfter(opt.endDate))
      {
        return true;
      }
      return false;
    }

    function getGapHTML()
    {
      var html = ['<div class="gap-top-mask"></div><div class="gap-bottom-mask"></div><div class="gap-lines">'];
      for(var i=0;i<20;i++)
      {
        html.push('<div class="gap-line">\
          <div class="gap-1"></div>\
          <div class="gap-2"></div>\
          <div class="gap-3"></div>\
        </div>');
      }
      html.push('</div>');
      return html.join('');
    }

    function hasMonth2()
    {
      return ( !opt.singleDate && !opt.singleMonth);
    }

    function attributesCallbacks(initialObject,callbacksArray,today)
    {
      var resultObject = jQuery.extend(true, {}, initialObject);

      jQuery.each(callbacksArray, function(cbAttrIndex, cbAttr){
        var addAttributes = cbAttr(today);
        for(var attr in addAttributes){
          if(resultObject.hasOwnProperty(attr)){
            resultObject[attr] += addAttributes[attr];
          }else{
            resultObject[attr] = addAttributes[attr];
          }
        }
      });

      var attrString = '';

      for(var attr in resultObject){
        if(resultObject.hasOwnProperty(attr)){
          attrString += attr + '="' + resultObject[attr] + '" ';
        }
      }

      return attrString;
    }

    function daysFrom1970(t)
    {
      return Math.floor(toLocalTimestamp(t) / 86400000);
    }

    function toLocalTimestamp(t)
    {
      if (moment.isMoment(t)) t = t.toDate().getTime();
      if (typeof t == 'object' && t.getTime) t = t.getTime();
      if (typeof t == 'string' && !t.match(/\d{13}/)) t = moment(t,opt.format).toDate().getTime();
      t = parseInt(t, 10) - new Date().getTimezoneOffset()*60*1000;
      return t;
    }

    function createMonthHTML(d)
    {
      var days = [];
      d.setDate(1);
      var lastMonth = new Date(d.getTime() - 86400000);
      var now = new Date();

      var dayOfWeek = d.getDay();
      if((dayOfWeek == 0) && (opt.startOfWeek == 'monday')) {
        // add one week
        dayOfWeek = 7;
      }

      if (dayOfWeek > 0)
      {
        for (var i = dayOfWeek; i > 0; i--)
        {
          var day = new Date(d.getTime() - 86400000*i);
          var valid = isValidTime(day.getTime());
          if (opt.startDate && compare_day(day,opt.startDate) < 0) valid = false;
          if (opt.endDate && compare_day(day,opt.endDate) > 0) valid = false;
          days.push(
          {
            date: day,
            type:'lastMonth',
            day: day.getDate(),
            time:day.getTime(),
            valid:valid
          });
        }
      }
      var toMonth = d.getMonth();
      for(var i=0; i<40; i++)
      {
        var today = moment(d).add(i, 'days').toDate();
        var valid = isValidTime(today.getTime());
        if (opt.startDate && compare_day(today,opt.startDate) < 0) valid = false;
        if (opt.endDate && compare_day(today,opt.endDate) > 0) valid = false;
        days.push(
        {
          date: today,
          type: today.getMonth() == toMonth ? 'toMonth' : 'nextMonth',
          day: today.getDate(),
          time:today.getTime(),
          valid:valid
        });
      }
      var html = [];
      for(var week=0; week<6; week++)
      {
        if (days[week*7].type == 'nextMonth') break;
        html.push('<tr>');
        for(var day = 0; day<7; day++)
        {
          var _day = (opt.startOfWeek == 'monday') ? day+1 : day;
          var today = days[week*7+_day];
          var highlightToday = moment(today.time).format('L') == moment(now).format('L');
          today.extraClass = '';
          today.tooltip = '';
          if(today.valid && opt.beforeShowDay && typeof opt.beforeShowDay == 'function')
          {
            var _r = opt.beforeShowDay(moment(today.time).toDate());
            today.valid = _r[0];
            today.extraClass = _r[1] || '';
            today.tooltip = _r[2] || '';
            if (today.tooltip != '') today.extraClass += ' has-tooltip ';
          }

          var todayDivAttr = {
            time: today.time,
            'data-tooltip': today.tooltip,
            'class': 'day '+today.type+' '+today.extraClass+' '+(today.valid ? 'valid' : 'invalid')+' '+(highlightToday?'real-today':'')
          };

          if (day == 0 && opt.showWeekNumbers)
          {
            html.push('<td><div class="week-number" data-start-time="'+today.time+'">'+opt.getWeekNumber(today.date)+'</div></td>');
          }

          html.push('<td ' + attributesCallbacks({},opt.dayTdAttrs,today) + '><div ' + attributesCallbacks(todayDivAttr,opt.dayDivAttrs,today) + '>'+showDayHTML(today.time, today.day)+'</div></td>');
        }
        html.push('</tr>');
      }
      return html.join('');
    }

    function showDayHTML(time, date)
    {
      if (opt.showDateFilter && typeof opt.showDateFilter == 'function') return opt.showDateFilter(time, date);
      return date;
    }

    function getLanguages()
    {
      if (opt.language == 'auto')
      {
        var language = navigator.language ? navigator.language : navigator.browserLanguage;
        if (!language) return $.dateRangePickerLanguages['default'];
        var language = language.toLowerCase();
        for(var key in $.dateRangePickerLanguages)
        {
          if (language.indexOf(key) != -1)
          {
            return $.dateRangePickerLanguages[key];
          }
        }
        return $.dateRangePickerLanguages['default'];
      }
      else if ( opt.language && opt.language in $.dateRangePickerLanguages)
      {
        return $.dateRangePickerLanguages[opt.language];
      }
      else
      {
        return $.dateRangePickerLanguages['default'];
      }
    }

    /**
     * translate language string
     */
    function lang(t)
    {
      var _t = t.toLowerCase();
      var re = (t in langs) ? langs[t] : ( _t in langs) ? langs[_t] : null;
      var defaultLanguage = $.dateRangePickerLanguages['default'];
      if (re == null) re = (t in defaultLanguage) ? defaultLanguage[t] : ( _t in defaultLanguage) ? defaultLanguage[_t] : '';
      return re;
    }


  };
}));

//Activate the daterangepicker plugin//    



</script>

